{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/hjson/lib/hjson-comments.js","node_modules/hjson/lib/hjson-common.js","node_modules/hjson/lib/hjson-dsf.js","node_modules/hjson/lib/hjson-parse.js","node_modules/hjson/lib/hjson-stringify.js","node_modules/hjson/lib/hjson-version.js","node_modules/hjson/lib/hjson.js","node_modules/os-browserify/browser.js","node_modules/pleasejs/dist/Please.js","src/BrowserSLW.js","src/Cursor.js","src/Entity.js","src/Level.js","src/SLW.js","src/SoundManager.js","src/Text.js","src/Tile.js","src/index.js","src/levels.hjson","src/util.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","makeComment","b","x","c","extractComments","value","root","comments","common","getComment","removeComment","any","res","Object","prototype","toString","apply","saveComment","keys","currentKeys","concat","forEach","key","hasOwnProperty","indexOf","push","undefined","mergeStr","arguments","trim","mergeComments","dropped","merge","text","rootComment","path","join","replace","item","col","droppedComment","dropAll","kpath","slice","setComments","createComment","setText","header","comment","forceComment","extract","footer","tryParseNumber","stopAtNext","next","ch","charAt","at","number","string","leadingZeros","testLeading","isFinite","defineProperty","enumerable","writable","__COMMENTS__","str","j","len","split","os","EOL","loadDsf","type","isFunction","nopDsf","dsf","name","parse","stringify","some","isInvalidDsfChar","message","runDsf","bind","math","opt","Infinity","NaN","isNaN","hex","out","test","parseInt","Number","isInteger","date","dt","Date","toISOString","substr","description","std","$source","$opt","resetAt","isPunctuatorChar","error","m","line","peek","offs","uffff","charCodeAt","String","fromCharCode","escapee","mlString","skipIndent","skip","indent","triple","keyname","start","space","white","tfnns","isEol","chf","dsfValue","cAt","first","shift","errorClosingHint","search","k","report","possibleErr","array","nextComment","keepComments","hint","object","withoutBraces","checkTrailing","v","rootValue","e2","hjsonParse","source","dsfDef","keepWsc","\"","\\","/","$value","wrap","tk","quoteReplace","needsEscape","meta","token","esc","uni","quote","gap","hasComment","isRootObject","needsQuotes","lastIndex","startsWithKeyword","quoteAlways","needsEscapeML","qstr","mstr","eol","quoteKey","needsEscapeName","qkey","noIndent","startsWithNL","commentOnThisLine","prefix","rem","num","lit","isArray","mind","ca","eolMind","eolGap","bracesSameLine","partial","arr","obj","hjsonStringify","quotes","colors","\b","\t","\n","\f","\r","version","endOfLine","setEndOfLine","rt","options","endianness","hostname","location","loadavg","uptime","freemem","MAX_VALUE","totalmem","cpus","release","navigator","appVersion","networkInterfaces","getNetworkInterfaces","arch","platform","tmpdir","tmpDir","define","amd","this","Math","random","floor","max","min","F","HSV_to_HEX","HSV_to_RGB","g","console","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellow","yellowgreen","hue","saturation","base_color","greyscale","grayscale","golden","full_random","colors_returned","format","seed","scheme_type","h","NAME_to_HEX","toLowerCase","NAME_to_RGB","HEX_to_RGB","NAME_to_HSV","HEX_to_HSV","exec","RGB_to_HEX","RGB_to_HSV","make_scheme","d","abs","make_color","match","E","p","make_contrast","_SLW","_Tile","BrowserSLW","game","_classCallCheck","document","getElementById","editorToggle","addToggle","_Toggle","_class","_possibleConstructorReturn","__proto__","getPrototypeOf","_inherits","_createClass","setTitle","setChecked","setDisabled","el","checked","innerHTML","level","editorEnabled","Toggle","events","addEventListener","_ref","special","includes","_Toggle2","_class2","load","gamepadSupport","save","gamepadEnabled","toggleClass","toggle","toggles","querySelector","appendChild","btn","_this3","createElement","onCreate","window","onDestroy","newChecked","classList","add","remove","onCheckedChanged","newDisabled","disabled","setAttribute","removeAttribute","newTitle","firstChild","removeChild","createTextNode","localStorage","Cursor","scale","pos","down","image","Image","src","_this","evt","rect","getBoundingClientRect","clientX","left","clientY","top","ctx","y","centeredX","width","centeredY","height","drawImage","_Level","_Text","_util","DEBUG","GRAVITY","Entity","sprite","sheet","position","positionType","z","xv","yv","w","color","stop","round","sign","touchingWallRight","touchingWallLeft","_i","grounded","collides","ceil","_Tile2","default","size","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","tilesAbove","Symbol","iterator","done","tile","onAirPunch","err","return","destroy","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","pickTiles","_tile","onTouch","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","tilesBelow","_tile2","onStand","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","entityCollides","entity","canvas","getContext","CanvasRenderingContext2D","fillStyle","fillRect","_Text2","write","constructor","right","bottom","_ref2","_slicedToArray","shouldReturnTiles","tileLeft","tileRight","tileTop","tileBottom","tiles","collision","tileAt","solid","px","py","entities","splice","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","by","solidTop","Player","spriteAnimation","time","dir","anim","oldAnim","nextFrame","state","errorSound","sounds","getSound","startLevelSound","moveLevelSound","jumpSound","mapMotion","levelMotion","_get","wantsInput","playNew","walkSpeed","on","tileX","tileY","lastOn","texPosition","_on$texPosition","isRight","isLeft","isDown","isUp","isYes","newKeys","lv","id","levelid","levels","newLevel","_Level2","tileset","changeLevel","tick","isJump","mayJump","lastJump","now","up","world","Powerup","Goomba","_this2","Mushroom","_ref3","_len","args","Array","_key","_this4","_toConsumableArray","Sign","_this5","Coin","_this6","coinSound","HalfwayFlag","_this7","frame","_Entity","MUSIC_VOLUMES","airship","athletic","beach","castle","ice-cave","file-select","flower-gardens","grassland","jungle","kapper-valley","star-world","underwater-underworld","water","underground","Level","tilemap","layer","opts","exists","music","volume","loops","def","_constructor","ent","Function","onUpdate","viewStartX","camera","viewStartY","viewEndX","viewEndY","_tiles","tilesAt","_getAbsolutePosition","getAbsolutePosition","_getAbsolutePosition2","rendX","rendY","_tile$texPosition","dx","dy","filter","Air","_ref4","newTile","_ref6","_ref5","oldTile","onNearbyReplace","_ref8","_ref7","_Cursor","_SoundManager","BG_COLORS","clouds","hills","BG_REPEATS","SLW","EventController","registerEvent","_SoundManager2","keyCode","which","player","cameraInEditor","cursor","_Cursor2","watchMouse","lastPlacePos","genericTilePlaceSound","airPlaceSound","background","gamepads","getGamepads","newest","gamepad","connected","timestamp","pad","buttons","pressed","axes","warn","minY","maxY","minX","maxX","CAM_SPD","wave","sin","lag","update","oldLevel","create","dispatchEvent","tx","ty","translate","ptrn","bg","createPattern","restore","sort","draw","tileOn","metaOf","map","_cursor$pos","cursorX","cursorY","roundTileX","roundTileY","cursorTileX","cursorTileY","drawUsingCtx","tileToPaint","replaceTile","sound","makeNew","then","rate","SoundManager","Map","AudioContext","urlTemplate","ext","has","get","Sound","set","manager","srcURL","dataBufferLoaded","sources","loadingPromise","fetch","response","arrayBuffer","buf","decodeAudioData","data","dataBuffer","SoundSource","Promise","resolve","buffer","createBufferSource","loop","gainNode","createGain","connect","destination","gain","playbackRate","Text","chars","TypeError","img","tint","char","A","B","C","D","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","q","?","!",".","'","(",")","#"," ","-","0","2","3","4","5","6","7","8","9","Tile","props","UsedBlock","updateTexture","topTile","bottomTile","bottomLeftTile","bottomRightTile","foliage","rnd","what","QuestionBlock","output","punchSound","usedBlock","_game$level$getAbsolu","_game$level$getAbsolu2","_BrowserSLW","onload","_SLW2","browser","_BrowserSLW2","body","focus","render","gamepadInput","hasFocus","cameraUpdate","entityUpdate","canvasClear","requestAnimationFrame","arrEqual","arr1","arr2","colour","operation","alpha","globalCompositeOperation","globalAlpha","toDataURL","crop","ox","oy","hjson","listeners","eventName","callback","eventListeners","Empty"],"mappings":"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","file":"index.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/* Hjson http://hjson.org */\n/* jslint node: true */\n\"use strict\";\n\nvar common=require(\"./hjson-common\");\n\nfunction makeComment(b, a, x) {\n  var c;\n  if (b) c={ b: b };\n  if (a) (c=c||{}).a=a;\n  if (x) (c=c||{}).x=x;\n  return c;\n}\n\nfunction extractComments(value, root) {\n\n  if (value===null || typeof value!=='object') return;\n  var comments=common.getComment(value);\n  if (comments) common.removeComment(value);\n\n  var i, length; // loop\n  var any, res;\n  if (Object.prototype.toString.apply(value) === '[object Array]') {\n    res={ a: [] };\n    for (i=0, length=value.length; i<length; i++) {\n      if (saveComment(res.a, i, comments.a[i], extractComments(value[i])))\n        any=true;\n    }\n    if (!any && comments.e){\n      res.e=makeComment(comments.e[0], comments.e[1]);\n      any=true;\n    }\n  } else {\n    res={ s: {} };\n\n    // get key order (comments and current)\n    var keys, currentKeys=Object.keys(value);\n    if (comments && comments.o) {\n      keys=[];\n      comments.o.concat(currentKeys).forEach(function(key) {\n        if (Object.prototype.hasOwnProperty.call(value, key) && keys.indexOf(key)<0)\n          keys.push(key);\n      });\n    } else keys=currentKeys;\n    res.o=keys;\n\n    // extract comments\n    for (i=0, length=keys.length; i<length; i++) {\n      var key=keys[i];\n      if (saveComment(res.s, key, comments.c[key], extractComments(value[key])))\n        any=true;\n    }\n    if (!any && comments.e) {\n      res.e=makeComment(comments.e[0], comments.e[1]);\n      any=true;\n    }\n  }\n\n  if (root && comments && comments.r) {\n    res.r=makeComment(comments.r[0], comments.r[1]);\n  }\n\n  return any?res:undefined;\n}\n\nfunction mergeStr() {\n  var res=\"\";\n  [].forEach.call(arguments, function(c) {\n    if (c && c.trim()!==\"\") {\n      if (res) res+=\"; \";\n      res+=c.trim();\n    }\n  });\n  return res;\n}\n\nfunction mergeComments(comments, value) {\n  var dropped=[];\n  merge(comments, value, dropped, []);\n\n  // append dropped comments:\n  if (dropped.length>0) {\n    var text=rootComment(value, null, 1);\n    text+=\"\\n# Orphaned comments:\\n\";\n    dropped.forEach(function(c) {\n      text+=(\"# \"+c.path.join('/')+\": \"+mergeStr(c.b, c.a, c.e)).replace(\"\\n\", \"\\\\n \")+\"\\n\";\n    });\n    rootComment(value, text, 1);\n  }\n}\n\nfunction saveComment(res, key, item, col) {\n  var c=makeComment(item?item[0]:undefined, item?item[1]:undefined, col);\n  if (c) res[key]=c;\n  return c;\n}\n\nfunction droppedComment(path, c) {\n  var res=makeComment(c.b, c.a);\n  res.path=path;\n  return res;\n}\n\nfunction dropAll(comments, dropped, path) {\n\n  if (!comments) return;\n\n  var i, length; // loop\n\n  if (comments.a) {\n\n    for (i=0, length=comments.a.length; i<length; i++) {\n      var kpath=path.slice().concat([i]);\n      var c=comments.a[i];\n      if (c) {\n        dropped.push(droppedComment(kpath, c));\n        dropAll(c.x, dropped, kpath);\n      }\n    }\n  } else if (comments.o) {\n\n    comments.o.forEach(function(key) {\n      var kpath=path.slice().concat([key]);\n      var c=comments.s[key];\n      if (c) {\n        dropped.push(droppedComment(kpath, c));\n        dropAll(c.x, dropped, kpath);\n      }\n    });\n  }\n\n  if (comments.e)\n    dropped.push(droppedComment(path, comments.e));\n}\n\nfunction merge(comments, value, dropped, path) {\n\n  if (!comments) return;\n  if (value===null || typeof value!=='object') {\n    dropAll(comments, dropped, path);\n    return;\n  }\n\n  var i, length; // loop\n  var setComments=common.createComment(value);\n\n  if (path.length===0 && comments.r)\n    setComments.r=[comments.r.b, comments.r.a];\n\n  if (Object.prototype.toString.apply(value) === '[object Array]') {\n    setComments.a=[];\n    for (i=0, length=(comments.a||[]).length; i<length; i++) {\n      var kpath=path.slice().concat([i]);\n      var c=comments.a[i];\n      if (!c) continue;\n      if (i<value.length) {\n        setComments.a.push([c.b, c.a]);\n        merge(c.x, value[i], dropped, kpath);\n      } else {\n        dropped.push(droppedComment(kpath, c));\n        dropAll(c.x, dropped, kpath);\n      }\n    }\n    if (i===0 && comments.e) setComments.e=[comments.e.b, comments.e.a];\n  } else {\n    setComments.c={};\n    setComments.o=[];\n    (comments.o||[]).forEach(function(key) {\n      var kpath=path.slice().concat([key]);\n      var c=comments.s[key];\n      if (Object.prototype.hasOwnProperty.call(value, key)) {\n        setComments.o.push(key);\n        if (c) {\n          setComments.c[key]=[c.b, c.a];\n          merge(c.x, value[key], dropped, kpath);\n        }\n      } else if (c) {\n        dropped.push(droppedComment(kpath, c));\n        dropAll(c.x, dropped, kpath);\n      }\n    });\n    if (comments.e) setComments.e=[comments.e.b, comments.e.a];\n  }\n}\n\nfunction rootComment(value, setText, header) {\n  var comment=common.createComment(value, common.getComment(value));\n  if (!comment.r) comment.r=[\"\", \"\"];\n  if (setText || setText===\"\") comment.r[header]=common.forceComment(setText);\n  return comment.r[header]||\"\";\n}\n\nmodule.exports={\n  extract: function(value) { return extractComments(value, true); },\n  merge: mergeComments,\n  header: function(value, setText) { return rootComment(value, setText, 0); },\n  footer: function(value, setText) { return rootComment(value, setText, 1); },\n};\n","/* Hjson http://hjson.org */\n/* jslint node: true */\n\"use strict\";\n\nvar os=require('os'); // will be {} when used in a browser\n\nfunction tryParseNumber(text, stopAtNext) {\n\n  // try to parse a number\n\n  var number, string = '', leadingZeros = 0, testLeading = true;\n  var at = 0;\n  var ch;\n  function next() {\n    ch = text.charAt(at);\n    at++;\n    return ch;\n  }\n\n  next();\n  if (ch === '-') {\n    string = '-';\n    next();\n  }\n  while (ch >= '0' && ch <= '9') {\n    if (testLeading) {\n      if (ch == '0') leadingZeros++;\n      else testLeading = false;\n    }\n    string += ch;\n    next();\n  }\n  if (testLeading) leadingZeros--; // single 0 is allowed\n  if (ch === '.') {\n    string += '.';\n    while (next() && ch >= '0' && ch <= '9')\n      string += ch;\n  }\n  if (ch === 'e' || ch === 'E') {\n    string += ch;\n    next();\n    if (ch === '-' || ch === '+') {\n      string += ch;\n      next();\n    }\n    while (ch >= '0' && ch <= '9') {\n      string += ch;\n      next();\n    }\n  }\n\n  // skip white/to (newline)\n  while (ch && ch <= ' ') next();\n\n  if (stopAtNext) {\n    // end scan if we find a punctuator character like ,}] or a comment\n    if (ch === ',' || ch === '}' || ch === ']' ||\n      ch === '#' || ch === '/' && (text[at] === '/' || text[at] === '*')) ch = 0;\n  }\n\n  number = +string;\n  if (ch || leadingZeros || !isFinite(number)) return undefined;\n  else return number;\n}\n\nfunction createComment(value, comment) {\n  if (Object.defineProperty) Object.defineProperty(value, \"__COMMENTS__\", { enumerable: false, writable: true });\n  return (value.__COMMENTS__ = comment||{});\n}\n\nfunction removeComment(value) {\n  Object.defineProperty(value, \"__COMMENTS__\", { value: undefined });\n}\n\nfunction getComment(value) {\n  return value.__COMMENTS__;\n}\n\nfunction forceComment(text) {\n  if (!text) return \"\";\n  var a = text.split('\\n');\n  var str, i, j, len;\n  for (j = 0; j < a.length; j++) {\n    str = a[j];\n    len = str.length;\n    for (i = 0; i < len; i++) {\n      var c = str[i];\n      if (c === '#') break;\n      else if (c === '/' && (str[i+1] === '/' || str[i+1] === '*')) {\n        if (str[i+1] === '*') j = a.length; // assume /**/ covers whole block, bail out\n        break;\n      }\n      else if (c > ' ') {\n        a[j] = '# ' + str;\n        break;\n      }\n    }\n  }\n  return a.join('\\n');\n}\n\nmodule.exports = {\n  EOL: os.EOL || '\\n',\n  tryParseNumber: tryParseNumber,\n  createComment: createComment,\n  removeComment: removeComment,\n  getComment: getComment,\n  forceComment: forceComment,\n};\n","/* Hjson http://hjson.org */\n/* jslint node: true */\n\"use strict\";\n\nvar common = require(\"./hjson-common\");\n\nfunction loadDsf(col, type) {\n\n  if (Object.prototype.toString.apply(col) !== '[object Array]') {\n    if (col) throw new Error(\"dsf option must contain an array!\");\n    else return nopDsf;\n  } else if (col.length === 0) return nopDsf;\n\n  var dsf = [];\n  function isFunction(f) { return {}.toString.call(f) === '[object Function]'; }\n\n  col.forEach(function(x) {\n    if (!x.name || !isFunction(x.parse) || !isFunction(x.stringify))\n      throw new Error(\"extension does not match the DSF interface\");\n    dsf.push(function() {\n      try {\n        if (type == \"parse\") {\n          return x.parse.apply(null, arguments);\n        } else if (type == \"stringify\") {\n          var res=x.stringify.apply(null, arguments);\n          // check result\n          if (res !== undefined && (typeof res !== \"string\" ||\n            res.length === 0 ||\n            res[0] === '\"' ||\n            [].some.call(res, function(c) { return isInvalidDsfChar(c); })))\n            throw new Error(\"value may not be empty, start with a quote or contain a punctuator character except colon: \" + res);\n          return res;\n        } else throw new Error(\"Invalid type\");\n      } catch (e) {\n        throw new Error(\"DSF-\"+x.name+\" failed; \"+e.message);\n      }\n    });\n  });\n\n  return runDsf.bind(null, dsf);\n}\n\nfunction runDsf(dsf, value) {\n  if (dsf) {\n    for (var i = 0; i < dsf.length; i++) {\n      var res = dsf[i](value);\n      if (res !== undefined) return res;\n    }\n  }\n}\n\nfunction nopDsf(value) {\n}\n\nfunction isInvalidDsfChar(c) {\n  return c === '{' || c === '}' || c === '[' || c === ']' || c === ',';\n}\n\n\nfunction math(opt) {\n  return {\n    name: \"math\",\n    parse: function (value) {\n      switch (value) {\n        case \"+inf\":\n        case \"inf\":\n        case \"+Inf\":\n        case \"Inf\": return Infinity;\n        case \"-inf\":\n        case \"-Inf\": return -Infinity;\n        case \"nan\":\n        case \"NaN\": return NaN;\n      }\n    },\n    stringify: function (value) {\n      if (typeof value !== 'number') return;\n      if (1 / value === -Infinity) return \"-0\"; // 0 === -0\n      if (value === Infinity) return \"Inf\";\n      if (value === -Infinity) return \"-Inf\";\n      if (isNaN(value)) return \"NaN\";\n    },\n  };\n}\nmath.description=\"support for Inf/inf, -Inf/-inf, Nan/naN and -0\";\n\nfunction hex(opt) {\n  var out=opt && opt.out;\n  return {\n    name: \"hex\",\n    parse: function (value) {\n      if (/^0x[0-9A-Fa-f]+$/.test(value))\n        return parseInt(value, 16);\n    },\n    stringify: function (value) {\n      if (out && Number.isInteger(value))\n        return \"0x\"+value.toString(16);\n    },\n  };\n}\nhex.description=\"parse hexadecimal numbers prefixed with 0x\";\n\nfunction date(opt) {\n  return {\n    name: \"date\",\n    parse: function (value) {\n      if (/^\\d{4}-\\d{2}-\\d{2}$/.test(value) ||\n        /^\\d{4}-\\d{2}-\\d{2}T\\d{2}\\:\\d{2}\\:\\d{2}(?:.\\d+)(?:Z|[+-]\\d{2}:\\d{2})$/.test(value)) {\n        var dt = Date.parse(value);\n        if (!isNaN(dt)) return new Date(dt);\n      }\n    },\n    stringify: function (value) {\n      if (Object.prototype.toString.call(value) === '[object Date]') {\n        var dt = value.toISOString();\n        if (dt.indexOf(\"T00:00:00.000Z\", dt.length - 14) !== -1) return dt.substr(0, 10);\n        else return dt;\n      }\n    },\n  };\n}\ndate.description=\"support ISO dates\";\n\nmodule.exports = {\n  loadDsf: loadDsf,\n  std: {\n    math: math,\n    hex: hex,\n    date: date,\n  },\n};\n","/* Hjson http://hjson.org */\n/* jslint node: true */\n\"use strict\";\n\nmodule.exports = function($source, $opt) {\n\n  var common = require(\"./hjson-common\");\n  var dsf = require(\"./hjson-dsf\");\n\n  var text;\n  var at;   // The index of the current character\n  var ch;   // The current character\n  var escapee = {\n    '\"': '\"',\n    '\\\\': '\\\\',\n    '/': '/',\n    b:  '\\b',\n    f:  '\\f',\n    n:  '\\n',\n    r:  '\\r',\n    t:  '\\t'\n  };\n\n  var keepComments;\n  var runDsf; // domain specific formats\n\n  function resetAt() {\n    at = 0;\n    ch = ' ';\n  }\n\n  function isPunctuatorChar(c) {\n    return c === '{' || c === '}' || c === '[' || c === ']' || c === ',' || c === ':';\n  }\n\n  // Call error when something is wrong.\n  function error(m) {\n    var i, col=0, line=1;\n    for (i = at-1; i > 0 && text[i] !== '\\n'; i--, col++) {}\n    for (; i > 0; i--) if (text[i] === '\\n') line++;\n    throw new Error(m + \" at line \" + line + \",\" + col + \" >>>\" + text.substr(at-col, 20) + \" ...\");\n  }\n\n  function next() {\n    // get the next character.\n    ch = text.charAt(at);\n    at++;\n    return ch;\n  }\n\n  function peek(offs) {\n    // range check is not required\n    return text.charAt(at + offs);\n  }\n\n  function string() {\n    // Parse a string value.\n    var string = '';\n\n    // When parsing for string values, we must look for \" and \\ characters.\n    if (ch === '\"') {\n      while (next()) {\n        if (ch === '\"') {\n          next();\n          return string;\n        }\n        if (ch === '\\\\') {\n          next();\n          if (ch === 'u') {\n            var uffff = 0;\n            for (var i = 0; i < 4; i++) {\n              next();\n              var c = ch.charCodeAt(0), hex;\n              if (ch >= '0' && ch <= '9') hex = c - 48;\n              else if (ch >= 'a' && ch <= 'f') hex = c - 97 + 0xa;\n              else if (ch >= 'A' && ch <= 'F') hex = c - 65 + 0xa;\n              else error(\"Bad \\\\u char \" + ch);\n              uffff = uffff * 16 + hex;\n            }\n            string += String.fromCharCode(uffff);\n          } else if (typeof escapee[ch] === 'string') {\n            string += escapee[ch];\n          } else break;\n        } else {\n          string += ch;\n        }\n      }\n    }\n    error(\"Bad string\");\n  }\n\n  function mlString() {\n    // Parse a multiline string value.\n    var string = '', triple = 0;\n\n    // we are at ''' +1 - get indent\n    var indent = 0;\n    while (true) {\n      var c=peek(-indent-5);\n      if (!c || c === '\\n') break;\n      indent++;\n    }\n\n    function skipIndent() {\n      var skip = indent;\n      while (ch && ch <= ' ' && ch !== '\\n' && skip-- > 0) next();\n    }\n\n    // skip white/to (newline)\n    while (ch && ch <= ' ' && ch !== '\\n') next();\n    if (ch === '\\n') { next(); skipIndent(); }\n\n    // When parsing multiline string values, we must look for ' characters.\n    while (true) {\n      if (!ch) {\n        error(\"Bad multiline string\");\n      } else if (ch === '\\'') {\n        triple++;\n        next();\n        if (triple === 3) {\n          if (string.slice(-1) === '\\n') string=string.slice(0, -1); // remove last EOL\n          return string;\n        } else continue;\n      } else {\n        while (triple > 0) {\n          string += '\\'';\n          triple--;\n        }\n      }\n      if (ch === '\\n') {\n        string += '\\n';\n        next();\n        skipIndent();\n      } else {\n        if (ch !== '\\r') string += ch;\n        next();\n      }\n    }\n  }\n\n  function keyname() {\n    // quotes for keys are optional in Hjson\n    // unless they include {}[],: or whitespace.\n\n    if (ch === '\"') return string();\n\n    var name = \"\", start = at, space = -1;\n    while (true) {\n      if (ch === ':') {\n        if (!name) error(\"Found ':' but no key name (for an empty key name use quotes)\");\n        else if (space >=0 && space !== name.length) { at = start + space; error(\"Found whitespace in your key name (use quotes to include)\"); }\n        return name;\n      } else if (ch <= ' ') {\n        if (!ch) error(\"Found EOF while looking for a key name (check your syntax)\");\n        else if (space < 0) space = name.length;\n      } else if (isPunctuatorChar(ch)) {\n        error(\"Found '\" + ch + \"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)\");\n      } else {\n        name += ch;\n      }\n      next();\n    }\n  }\n\n  function white() {\n    while (ch) {\n      // Skip whitespace.\n      while (ch && ch <= ' ') next();\n      // Hjson allows comments\n      if (ch === '#' || ch === '/' && peek(0) === '/') {\n        while (ch && ch !== '\\n') next();\n      } else if (ch === '/' && peek(0) === '*') {\n        next(); next();\n        while (ch && !(ch === '*' && peek(0) === '/')) next();\n        if (ch) { next(); next(); }\n      } else break;\n    }\n  }\n\n  function tfnns() {\n    // Hjson strings can be quoteless\n    // returns string, true, false, or null.\n    var value = ch;\n    if (isPunctuatorChar(ch))\n      error(\"Found a punctuator character '\" + ch + \"' when expecting a quoteless string (check your syntax)\");\n\n    for(;;) {\n      next();\n      if (value.length === 3 && value === \"'''\") return mlString();\n      var isEol = ch === '\\r' || ch === '\\n' || ch === '';\n      if (isEol ||\n        ch === ',' || ch === '}' || ch === ']' ||\n        ch === '#' ||\n        ch === '/' && (peek(0) === '/' || peek(0) === '*')\n        ) {\n        // this tests for the case of {true|false|null|num}\n        // followed by { ',' | '}' | ']' | '#' | '//' | '/*' }\n        // which needs to be parsed as the specified value\n        var chf = value[0];\n        switch (chf) {\n          case 'f': if (value.trim() === \"false\") return false; break;\n          case 'n': if (value.trim() === \"null\") return null; break;\n          case 't': if (value.trim() === \"true\") return true; break;\n          default:\n            if (chf === '-' || chf >= '0' && chf <= '9') {\n              var n = common.tryParseNumber(value);\n              if (n !== undefined) return n;\n            }\n        }\n        if (isEol) {\n          // remove any whitespace at the end (ignored in quoteless strings)\n          value = value.trim();\n          var dsfValue = runDsf(value);\n          return dsfValue !== undefined ? dsfValue : value;\n        }\n      }\n      value += ch;\n    }\n  }\n\n  function getComment(cAt, first) {\n    var i;\n    cAt--;\n    // remove trailing whitespace\n    // but only up to EOL\n    for (i = at - 2; i > cAt && text[i] <= ' ' && text[i] !== '\\n'; i--);\n    if (text[i] === '\\n') i--;\n    if (text[i] === '\\r') i--;\n    var res = text.substr(cAt, i-cAt+1);\n    // return if we find anything other than whitespace\n    for (i = 0; i < res.length; i++) {\n      if (res[i] > ' ') {\n        var j = res.indexOf('\\n');\n        if (j >= 0) {\n          var c = [res.substr(0, j), res.substr(j+1)];\n          if (first && c[0].trim().length === 0) c.shift();\n          return c;\n        } else return [res];\n      }\n    }\n    return [];\n  }\n\n  function errorClosingHint(value) {\n    function search(value, ch) {\n      var i, k, length, res;\n      switch (typeof value) {\n        case 'string':\n          if (value.indexOf(ch) >= 0) res=value;\n          break;\n        case 'object':\n          if (Object.prototype.toString.apply(value) === '[object Array]') {\n            for (i = 0, length = value.length; i < length; i++) {\n              res=search(value[i], ch) || res;\n            }\n          } else {\n            for (k in value) {\n              if (!Object.prototype.hasOwnProperty.call(value, k)) continue;\n              res=search(value[k], ch) || res;\n            }\n          }\n      }\n      return res;\n    }\n\n    function report(ch) {\n      var possibleErr=search(value, ch);\n      if (possibleErr) {\n        return \"found '\"+ch+\"' in a string value, your mistake could be with:\\n\"+\n          \"  > \"+possibleErr+\"\\n\"+\n          \"  (unquoted strings contain everything up to the next line!)\";\n      } else return \"\";\n    }\n\n    return report('}') || report(']');\n  }\n\n  function array() {\n    // Parse an array value.\n    // assuming ch === '['\n\n    var array = [];\n    var comments, cAt, nextComment;\n    try {\n      if (keepComments) comments = common.createComment(array, { a: [] });\n\n      next();\n      cAt = at;\n      white();\n      if (comments) nextComment = getComment(cAt, true).join('\\n');\n      if (ch === ']') {\n        next();\n        if (comments) comments.e = [nextComment];\n        return array;  // empty array\n      }\n\n      while (ch) {\n        array.push(value());\n        cAt = at;\n        white();\n        // in Hjson the comma is optional and trailing commas are allowed\n        // note that we do not keep comments before the , if there are any\n        if (ch === ',') { next(); cAt = at; white(); }\n        if (comments) {\n          var c = getComment(cAt);\n          comments.a.push([nextComment||\"\", c[0]||\"\"]);\n          nextComment = c[1];\n        }\n        if (ch === ']') {\n          next();\n          if (comments) comments.a[comments.a.length-1][1] += nextComment||\"\";\n          return array;\n        }\n        white();\n      }\n\n      error(\"End of input while parsing an array (missing ']')\");\n    } catch (e) {\n      e.hint=e.hint||errorClosingHint(array);\n      throw e;\n    }\n  }\n\n  function object(withoutBraces) {\n    // Parse an object value.\n\n    var key = \"\", object = {};\n    var comments, cAt, nextComment;\n\n    try {\n      if (keepComments) comments = common.createComment(object, { c: {}, o: []  });\n\n      if (!withoutBraces) {\n        // assuming ch === '{'\n        next();\n        cAt = at;\n      } else cAt = 1;\n\n      white();\n      if (comments) nextComment = getComment(cAt, true).join('\\n');\n      if (ch === '}' && !withoutBraces) {\n        if (comments) comments.e = [nextComment];\n        next();\n        return object;  // empty object\n      }\n      while (ch) {\n        key = keyname();\n        white();\n        if (ch !== ':') error(\"Expected ':' instead of '\" + ch + \"'\");\n        next();\n        // duplicate keys overwrite the previous value\n        object[key] = value();\n        cAt = at;\n        white();\n        // in Hjson the comma is optional and trailing commas are allowed\n        // note that we do not keep comments before the , if there are any\n        if (ch === ',') { next(); cAt = at; white(); }\n        if (comments) {\n          var c = getComment(cAt);\n          comments.c[key] = [nextComment||\"\", c[0]||\"\"];\n          nextComment = c[1];\n          comments.o.push(key);\n        }\n        if (ch === '}' && !withoutBraces) {\n          next();\n          if (comments) comments.c[key][1] += nextComment||\"\";\n          return object;\n        }\n        white();\n      }\n\n      if (withoutBraces) return object;\n      else error(\"End of input while parsing an object (missing '}')\");\n    } catch (e) {\n      e.hint=e.hint||errorClosingHint(object);\n      throw e;\n    }\n  }\n\n  function value() {\n    // Parse a Hjson value. It could be an object, an array, a string, a number or a word.\n\n    white();\n    switch (ch) {\n      case '{': return object();\n      case '[': return array();\n      case '\"': return string();\n      default: return tfnns();\n    }\n  }\n\n  function checkTrailing(v, c) {\n    var cAt = at;\n    white();\n    if (ch) error(\"Syntax error, found trailing characters\");\n    if (keepComments) {\n      var b = c.join('\\n'), a = getComment(cAt).join('\\n');\n      if (a || b) {\n        var comments = common.createComment(v, common.getComment(v));\n        comments.r = [b, a];\n      }\n    }\n    return v;\n  }\n\n  function rootValue() {\n    // Braces for the root object are optional\n    white();\n    var c = keepComments ? getComment(1) : null;\n    switch (ch) {\n      case '{': return checkTrailing(object(), c);\n      case '[': return checkTrailing(array(), c);\n    }\n\n    try {\n      // assume we have a root object without braces\n      return checkTrailing(object(true), c);\n    } catch (e) {\n      // test if we are dealing with a single JSON value instead (true/false/null/num/\"\")\n      resetAt();\n      try { return checkTrailing(value(), c); }\n      catch (e2) { throw e; } // throw original error\n    }\n  }\n\n  function hjsonParse(source, opt) {\n    if (typeof source!==\"string\") throw new Error(\"source is not a string\");\n    var dsfDef = null;\n    if (opt && typeof opt === 'object') {\n      keepComments = opt.keepWsc;\n      dsfDef = opt.dsf;\n    }\n    runDsf = dsf.loadDsf(dsfDef, \"parse\");\n    text = source;\n    resetAt();\n    return rootValue();\n  }\n\n  return hjsonParse($source, $opt);\n};\n","/* Hjson http://hjson.org */\n/* jslint node: true */\n\"use strict\";\n\nmodule.exports = function($value, $opt) {\n\n  var common = require(\"./hjson-common\");\n  var dsf = require(\"./hjson-dsf\");\n\n  var runDsf; // domain specific formats\n\n  // needsEscape tests if the string can be written without escapes\n  var needsEscape = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n  // needsQuotes tests if the string can be written as a quoteless string (includes needsEscape but without \\\\ and \\\")\n  var needsQuotes = /^\\s|^\"|^'''|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n  // needsEscapeML tests if the string can be written as a multiline string (includes needsEscape but without \\n, \\r, \\\\ and \\\")\n  var needsEscapeML = /'''|[\\x00-\\x09\\x0b\\x0c\\x0e-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n  // starts with a keyword and optionally is followed by a comment\n  var startsWithKeyword = /^(true|false|null)\\s*((,|\\]|\\}|#|\\/\\/|\\/\\*).*)?$/;\n  var meta =\n  {  // table of character substitutions\n    '\\b': 'b',\n    '\\t': 't',\n    '\\n': 'n',\n    '\\f': 'f',\n    '\\r': 'r',\n    '\"' : '\"',\n    '\\\\': '\\\\'\n  };\n  var needsEscapeName = /[,\\{\\[\\}\\]\\s:#\"]|\\/\\/|\\/\\*|'''/;\n  var gap = '';\n  var indent = '  ';\n  // options\n  var eol, keepComments, bracesSameLine, quoteAlways;\n  var token = {\n    obj:  [ '{', '}' ],\n    arr:  [ '[', ']' ],\n    key:  [ '',  '' ],\n    qkey: [ '\"', '\"' ],\n    col:  [ ':' ],\n    str:  [ '', '' ],\n    qstr: [ '\"', '\"' ],\n    mstr: [ \"'''\", \"'''\" ],\n    num:  [ '', '' ],\n    lit:  [ '', '' ],\n    dsf:  [ '', '' ],\n    esc:  [ '\\\\', '' ],\n    uni:  [ '\\\\u', '' ],\n    rem:  [ '', '' ],\n  };\n\n  function wrap(tk, v) { return tk[0] + v + tk[1]; }\n\n  function quoteReplace(string) {\n    return string.replace(needsEscape, function (a) {\n      var c = meta[a];\n      if (typeof c === 'string') return wrap(token.esc, c);\n      else return wrap(token.uni, ('0000' + a.charCodeAt(0).toString(16)).slice(-4));\n    });\n  }\n\n  function quote(string, gap, hasComment, isRootObject) {\n    if (!string) return wrap(token.qstr, '');\n\n    needsQuotes.lastIndex = 0;\n    startsWithKeyword.lastIndex = 0;\n\n    // Check if we can insert this string without quotes\n    // see hjson syntax (must not parse as true, false, null or number)\n\n    if (quoteAlways || hasComment ||\n      needsQuotes.test(string) ||\n      common.tryParseNumber(string, true) !== undefined ||\n      startsWithKeyword.test(string)) {\n\n      // If the string contains no control characters, no quote characters, and no\n      // backslash characters, then we can safely slap some quotes around it.\n      // Otherwise we first check if the string can be expressed in multiline\n      // format or we must replace the offending characters with safe escape\n      // sequences.\n\n      needsEscape.lastIndex = 0;\n      needsEscapeML.lastIndex = 0;\n      if (!needsEscape.test(string)) return wrap(token.qstr, string);\n      else if (!needsEscapeML.test(string) && !isRootObject) return mlString(string, gap);\n      else return wrap(token.qstr, quoteReplace(string));\n    } else {\n      // return without quotes\n      return wrap(token.str, string);\n    }\n  }\n\n  function mlString(string, gap) {\n    // wrap the string into the ''' (multiline) format\n\n    var i, a = string.replace(/\\r/g, \"\").split('\\n');\n    gap += indent;\n\n    if (a.length === 1) {\n      // The string contains only a single line. We still use the multiline\n      // format as it avoids escaping the \\ character (e.g. when used in a\n      // regex).\n      return wrap(token.mstr, a[0]);\n    } else {\n      var res = eol + gap + token.mstr[0];\n      for (i = 0; i < a.length; i++) {\n        res += eol;\n        if (a[i]) res += gap + a[i];\n      }\n      return res + eol + gap + token.mstr[1];\n    }\n  }\n\n  function quoteKey(name) {\n    if (!name) return '\"\"';\n\n    // Check if we can insert this key without quotes\n\n    if (needsEscapeName.test(name)) {\n      needsEscape.lastIndex = 0;\n      return wrap(token.qkey, needsEscape.test(name) ? quoteReplace(name) : name);\n    } else {\n      // return without quotes\n      return wrap(token.key, name);\n    }\n  }\n\n  function str(value, hasComment, noIndent, isRootObject) {\n    // Produce a string from value.\n\n    function startsWithNL(str) { return str && str[str[0] === '\\r' ? 1 : 0] === '\\n'; }\n    function commentOnThisLine(str) { return str && !startsWithNL(str); }\n    function makeComment(str, prefix, trim) {\n      if (!str) return \"\";\n      str = common.forceComment(str);\n      var i, len = str.length;\n      for (i = 0; i < len && str[i] <= ' '; i++) {}\n      if (trim && i > 0) str = str.substr(i);\n      if (i < len) return prefix + wrap(token.rem, str);\n      else return str;\n    }\n\n    // What happens next depends on the value's type.\n\n    // check for DSF\n    var dsfValue = runDsf(value);\n    if (dsfValue !== undefined) return wrap(token.dsf, dsfValue);\n\n    switch (typeof value) {\n      case 'string':\n        return quote(value, gap, hasComment, isRootObject);\n\n      case 'number':\n        // JSON numbers must be finite. Encode non-finite numbers as null.\n        return isFinite(value) ? wrap(token.num, String(value)) : wrap(token.lit, 'null');\n\n      case 'boolean':\n        return wrap(token.lit, String(value));\n\n      case 'object':\n        // If the type is 'object', we might be dealing with an object or an array or\n        // null.\n\n        // Due to a specification blunder in ECMAScript, typeof null is 'object',\n        // so watch out for that case.\n\n        if (!value) return wrap(token.lit, 'null');\n\n        var comments; // whitespace & comments\n        if (keepComments) comments = common.getComment(value);\n\n        var isArray = Object.prototype.toString.apply(value) === '[object Array]';\n\n        // Make an array to hold the partial results of stringifying this object value.\n        var mind = gap;\n        gap += indent;\n        var eolMind = eol + mind;\n        var eolGap = eol + gap;\n        var prefix = noIndent || bracesSameLine ? '' : eolMind;\n        var partial = [];\n\n        var i, length; // loop\n        var k, v; // key, value\n        var c, ca;\n\n        if (isArray) {\n          // The value is an array. Stringify every element. Use null as a placeholder\n          // for non-JSON values.\n\n          for (i = 0, length = value.length; i < length; i++) {\n            if (comments) {\n              c = comments.a[i]||[];\n              ca = commentOnThisLine(c[1]);\n              partial.push(makeComment(c[0], \"\\n\") + eolGap);\n            }\n            partial.push(str(value[i], comments ? ca : false, true) || wrap(token.lit, 'null'));\n            if (comments && c[1]) partial.push(makeComment(c[1], ca ? \" \" : \"\\n\", ca));\n          }\n\n          if (comments) {\n            if (length === 0) {\n              // when empty\n              partial.push((comments.e ? makeComment(comments.e[0], \"\\n\") : \"\") + eolMind);\n            }\n            else partial.push(eolMind);\n          }\n\n          // Join all of the elements together, separated with newline, and wrap them in\n          // brackets.\n\n          if (comments) v = prefix + wrap(token.arr, partial.join(''));\n          else if (partial.length === 0) v = wrap(token.arr, '');\n          else v = prefix + wrap(token.arr, eolGap + partial.join(eolGap) + eolMind);\n        } else {\n          // Otherwise, iterate through all of the keys in the object.\n\n          if (comments) {\n            var keys = comments.o.slice();\n            for (k in value) {\n              if (Object.prototype.hasOwnProperty.call(value, k) && keys.indexOf(k) < 0)\n                keys.push(k);\n            }\n\n            for (i = 0, length = keys.length; i < length; i++) {\n              k = keys[i];\n              c = comments.c[k]||[];\n              ca = commentOnThisLine(c[1]);\n              partial.push(makeComment(c[0], \"\\n\") + eolGap);\n\n              v = str(value[k], ca);\n              if (v) partial.push(quoteKey(k) + token.col + (startsWithNL(v) ? '' : ' ') + v);\n              if (comments && c[1]) partial.push(makeComment(c[1], ca ? \" \" : \"\\n\", ca));\n            }\n            if (length === 0) {\n              // when empty\n              partial.push((comments.e ? makeComment(comments.e[0], \"\\n\") : \"\") + eolMind);\n            }\n            else partial.push(eolMind);\n\n          } else {\n            for (k in value) {\n              if (Object.prototype.hasOwnProperty.call(value, k)) {\n                v = str(value[k]);\n                if (v) partial.push(quoteKey(k) + token.col + (startsWithNL(v) ? '' : ' ') + v);\n              }\n            }\n          }\n\n          // Join all of the member texts together, separated with newlines\n          if (partial.length === 0) {\n            v = wrap(token.obj, '');\n          } else {\n            // and wrap them in braces\n            if (comments) v = prefix + wrap(token.obj, partial.join(''));\n            else v = prefix + wrap(token.obj, eolGap + partial.join(eolGap) + eolMind);\n          }\n        }\n\n        gap = mind;\n        return v;\n    }\n  }\n\n  function hjsonStringify(value, opt) {\n    var i, space;\n    var dsfDef = null;\n\n    eol = common.EOL;\n    indent = '  ';\n    keepComments = false;\n    bracesSameLine = false;\n    quoteAlways = false;\n\n    if (opt && typeof opt === 'object') {\n      if (opt.eol === '\\n' || opt.eol === '\\r\\n') eol = opt.eol;\n      space = opt.space;\n      keepComments = opt.keepWsc;\n      bracesSameLine = opt.bracesSameLine;\n      quoteAlways = opt.quotes === 'always';\n      dsfDef = opt.dsf;\n\n      if (opt.colors === true) {\n        token = {\n          obj:  [ '\\x1b[30;1m{\\x1b[0m', '\\x1b[30;1m}\\x1b[0m' ],\n          arr:  [ '\\x1b[30;1m[\\x1b[0m', '\\x1b[30;1m]\\x1b[0m' ],\n          key:  [ '\\x1b[33m',  '\\x1b[0m' ],\n          qkey: [ '\\x1b[33m\"', '\"\\x1b[0m' ],\n          col:  [ '\\x1b[37m:\\x1b[0m' ],\n          str:  [ '\\x1b[37;1m', '\\x1b[0m' ],\n          qstr: [ '\\x1b[37;1m\"', '\"\\x1b[0m' ],\n          mstr: [ \"\\x1b[37;1m'''\", \"'''\\x1b[0m\" ],\n          num:  [ '\\x1b[36;1m', '\\x1b[0m' ],\n          lit:  [ '\\x1b[36m', '\\x1b[0m' ],\n          dsf:  [ '\\x1b[37m', '\\x1b[0m' ],\n          esc:  [ '\\x1b[31m\\\\', '\\x1b[0m' ],\n          uni:  [ '\\x1b[31m\\\\u', '\\x1b[0m' ],\n          rem:  [ '\\x1b[30;1m', '\\x1b[0m' ],\n        };\n      }\n    }\n\n    runDsf = dsf.loadDsf(dsfDef, 'stringify');\n\n    // If the space parameter is a number, make an indent string containing that\n    // many spaces. If it is a string, it will be used as the indent string.\n\n    if (typeof space === 'number') {\n      indent = '';\n      for (i = 0; i < space; i++) indent += ' ';\n    } else if (typeof space === 'string') {\n      indent = space;\n    }\n\n    var res = \"\";\n    var comments = keepComments ? comments = (common.getComment(value) || {}).r : null;\n    if (comments && comments[0]) res = comments[0] + '\\n';\n\n    // get the result of stringifying the value.\n    res += str(value, null, true, true);\n\n    if (comments) res += comments[1]||\"\";\n\n    return res;\n  }\n\n  return hjsonStringify($value, $opt);\n};\n","module.exports=\"2.3.1\";\n","/*! @preserve\n * Hjson v2.3.1\n * http://hjson.org\n *\n * Copyright 2014-2016 Christian Zangl, MIT license\n * Details and documentation:\n * https://github.com/hjson/hjson-js\n *\n * This code is based on the the JSON version by Douglas Crockford:\n * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)\n */\n\n/*\n\n  This file creates a Hjson object:\n\n\n    Hjson.parse(text, options)\n\n      options {\n        keepWsc     boolean, keep white space and comments. This is useful\n                    if you want to edit an hjson file and save it while\n                    preserving comments (default false)\n\n        dsf         array of DSF (see Hjson.dsf)\n      }\n\n      This method parses Hjson text to produce an object or array.\n      It can throw a SyntaxError exception.\n\n\n    Hjson.stringify(value, options)\n\n      value         any JavaScript value, usually an object or array.\n\n      options {     all options are\n\n        keepWsc     boolean, keep white space. See parse.\n\n        bracesSameLine\n                    boolean, makes braces appear on the same line as the key\n                    name. Default false.\n\n        emitRootBraces\n                    obsolete: will always emit braces\n\n        quotes      string, controls how strings are displayed.\n                    \"min\"     - no quotes whenever possible (default)\n                    \"always\"  - always use quotes\n\n        space       specifies the indentation of nested structures. If it is\n                    a number, it will specify the number of spaces to indent\n                    at each level. If it is a string (such as '\\t' or '  '),\n                    it contains the characters used to indent at each level.\n\n        eol         specifies the EOL sequence (default is set by\n                    Hjson.setEndOfLine())\n\n        colors      boolean, output ascii color codes\n\n        dsf         array of DSF (see Hjson.dsf)\n      }\n\n      This method produces Hjson text from a JavaScript value.\n\n      Values that do not have JSON representations, such as undefined or\n      functions, will not be serialized. Such values in objects will be\n      dropped; in arrays they will be replaced with null.\n      stringify(undefined) returns undefined.\n\n\n    Hjson.endOfLine()\n    Hjson.setEndOfLine(eol)\n\n      Gets or sets the stringify EOL sequence ('\\n' or '\\r\\n').\n      When running with node.js this defaults to os.EOL.\n\n\n    Hjson.rt { parse, stringify }\n\n      This is a shortcut to roundtrip your comments when reading and updating\n      a config file. It is the same as specifying the keepWsc option for the\n      parse and stringify functions.\n\n\n    Hjson.version\n\n      The version of this library.\n\n\n    Hjson.dsf\n\n      Domain specific formats are extensions to the Hjson syntax (see\n      hjson.org). These formats will be parsed and made available to\n      the application in place of strings (e.g. enable math to allow\n      NaN values).\n\n      Hjson.dsf ontains standard DSFs that can be passed to parse\n      and stringify.\n\n\n    Hjson.dsf.math()\n\n      Enables support for Inf/inf, -Inf/-inf, Nan/naN and -0.\n      Will output as Inf, -Inf, NaN and -0.\n\n\n    Hjson.dsf.hex(options)\n\n      Parse hexadecimal numbers prefixed with 0x.\n      set options.out = true to stringify _all_ integers as hex.\n\n\n    Hjson.dsf.date(options)\n\n      support ISO dates\n\n\n  This is a reference implementation. You are free to copy, modify, or\n  redistribute.\n\n*/\n\n/*jslint node: true */\n\"use strict\";\n\nvar common = require(\"./hjson-common\");\nvar version = require(\"./hjson-version\");\nvar parse = require(\"./hjson-parse\");\nvar stringify = require(\"./hjson-stringify\");\nvar comments = require(\"./hjson-comments\");\nvar dsf = require(\"./hjson-dsf\");\n\nmodule.exports={\n\n  parse: parse,\n  stringify: stringify,\n\n  endOfLine: function() { return common.EOL; },\n  setEndOfLine: function(eol) {\n    if (eol === '\\n' || eol === '\\r\\n') common.EOL = eol;\n  },\n\n  version: version,\n\n  // round trip shortcut\n  rt: {\n    parse: function(text, options) {\n      (options=options||{}).keepWsc=true;\n      return parse(text, options);\n    },\n    stringify: function(value, options) {\n      (options=options||{}).keepWsc=true;\n      return stringify(value, options);\n    },\n  },\n\n  comments: comments,\n\n  dsf: dsf.std,\n\n};\n","exports.endianness = function () { return 'LE' };\n\nexports.hostname = function () {\n    if (typeof location !== 'undefined') {\n        return location.hostname\n    }\n    else return '';\n};\n\nexports.loadavg = function () { return [] };\n\nexports.uptime = function () { return 0 };\n\nexports.freemem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.totalmem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.cpus = function () { return [] };\n\nexports.type = function () { return 'Browser' };\n\nexports.release = function () {\n    if (typeof navigator !== 'undefined') {\n        return navigator.appVersion;\n    }\n    return '';\n};\n\nexports.networkInterfaces\n= exports.getNetworkInterfaces\n= function () { return {} };\n\nexports.arch = function () { return 'javascript' };\n\nexports.platform = function () { return 'browser' };\n\nexports.tmpdir = exports.tmpDir = function () {\n    return '/tmp';\n};\n\nexports.EOL = '\\n';\n","/*!Please JS v0.4.2, Jordan Checkman 2014, Checkman.io, MIT License, Have fun.*/\n!function(e,r,a){\"function\"==typeof define&&define.amd?define([],a):\"object\"==typeof exports?module.exports=a():r[e]=a()}(\"Please\",this,function(){\"use strict\";function e(){function e(e,r,a){var o=Math.random;return a instanceof l&&(o=a.random),Math.floor(o()*(r-e+1))+e}function r(e,r,a){var o=Math.random;return a instanceof l&&(o=a.random),o()*(r-e)+e}function a(e,r,a){return Math.max(r,Math.min(e,a))}function o(e,r){var a;switch(e){case\"hex\":for(a=0;a<r.length;a++)r[a]=F.HSV_to_HEX(r[a]);break;case\"rgb\":for(a=0;a<r.length;a++)r[a]=F.HSV_to_RGB(r[a]);break;case\"rgb-string\":for(a=0;a<r.length;a++){var o=F.HSV_to_RGB(r[a]);r[a]=\"rgb(\"+o.r+\",\"+o.g+\",\"+o.b+\")\"}break;case\"hsv\":break;default:console.error(\"Format not recognized.\")}return r}function n(e){var r=F.HSV_to_RGB(e),a=(299*r.r+587*r.g+114*r.b)/1e3;return a>=128?\"dark\":\"light\"}function t(e){var r={};for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a]);return r}function l(e){function r(){o=(o+1)%256,n=(n+a[o])%256;var e=a[o];return a[o]=a[n],a[n]=e,a[(a[o]+a[n])%256]}for(var a=[],o=0,n=0,t=0;256>t;t++)a[t]=t;for(var l=0,F=0;256>l;l++){F=(F+a[l]+e.charCodeAt(l%e.length))%256;var s=a[l];a[l]=a[F],a[F]=s}this.random=function(){for(var e=0,a=0,o=1;8>e;e++)a+=r()*o,o*=256;return a/0x10000000000000000}}var F={},s={aliceblue:\"F0F8FF\",antiquewhite:\"FAEBD7\",aqua:\"00FFFF\",aquamarine:\"7FFFD4\",azure:\"F0FFFF\",beige:\"F5F5DC\",bisque:\"FFE4C4\",black:\"000000\",blanchedalmond:\"FFEBCD\",blue:\"0000FF\",blueviolet:\"8A2BE2\",brown:\"A52A2A\",burlywood:\"DEB887\",cadetblue:\"5F9EA0\",chartreuse:\"7FFF00\",chocolate:\"D2691E\",coral:\"FF7F50\",cornflowerblue:\"6495ED\",cornsilk:\"FFF8DC\",crimson:\"DC143C\",cyan:\"00FFFF\",darkblue:\"00008B\",darkcyan:\"008B8B\",darkgoldenrod:\"B8860B\",darkgray:\"A9A9A9\",darkgrey:\"A9A9A9\",darkgreen:\"006400\",darkkhaki:\"BDB76B\",darkmagenta:\"8B008B\",darkolivegreen:\"556B2F\",darkorange:\"FF8C00\",darkorchid:\"9932CC\",darkred:\"8B0000\",darksalmon:\"E9967A\",darkseagreen:\"8FBC8F\",darkslateblue:\"483D8B\",darkslategray:\"2F4F4F\",darkslategrey:\"2F4F4F\",darkturquoise:\"00CED1\",darkviolet:\"9400D3\",deeppink:\"FF1493\",deepskyblue:\"00BFFF\",dimgray:\"696969\",dimgrey:\"696969\",dodgerblue:\"1E90FF\",firebrick:\"B22222\",floralwhite:\"FFFAF0\",forestgreen:\"228B22\",fuchsia:\"FF00FF\",gainsboro:\"DCDCDC\",ghostwhite:\"F8F8FF\",gold:\"FFD700\",goldenrod:\"DAA520\",gray:\"808080\",grey:\"808080\",green:\"008000\",greenyellow:\"ADFF2F\",honeydew:\"F0FFF0\",hotpink:\"FF69B4\",indianred:\"CD5C5C\",indigo:\"4B0082\",ivory:\"FFFFF0\",khaki:\"F0E68C\",lavender:\"E6E6FA\",lavenderblush:\"FFF0F5\",lawngreen:\"7CFC00\",lemonchiffon:\"FFFACD\",lightblue:\"ADD8E6\",lightcoral:\"F08080\",lightcyan:\"E0FFFF\",lightgoldenrodyellow:\"FAFAD2\",lightgray:\"D3D3D3\",lightgrey:\"D3D3D3\",lightgreen:\"90EE90\",lightpink:\"FFB6C1\",lightsalmon:\"FFA07A\",lightseagreen:\"20B2AA\",lightskyblue:\"87CEFA\",lightslategray:\"778899\",lightslategrey:\"778899\",lightsteelblue:\"B0C4DE\",lightyellow:\"FFFFE0\",lime:\"00FF00\",limegreen:\"32CD32\",linen:\"FAF0E6\",magenta:\"FF00FF\",maroon:\"800000\",mediumaquamarine:\"66CDAA\",mediumblue:\"0000CD\",mediumorchid:\"BA55D3\",mediumpurple:\"9370D8\",mediumseagreen:\"3CB371\",mediumslateblue:\"7B68EE\",mediumspringgreen:\"00FA9A\",mediumturquoise:\"48D1CC\",mediumvioletred:\"C71585\",midnightblue:\"191970\",mintcream:\"F5FFFA\",mistyrose:\"FFE4E1\",moccasin:\"FFE4B5\",navajowhite:\"FFDEAD\",navy:\"000080\",oldlace:\"FDF5E6\",olive:\"808000\",olivedrab:\"6B8E23\",orange:\"FFA500\",orangered:\"FF4500\",orchid:\"DA70D6\",palegoldenrod:\"EEE8AA\",palegreen:\"98FB98\",paleturquoise:\"AFEEEE\",palevioletred:\"D87093\",papayawhip:\"FFEFD5\",peachpuff:\"FFDAB9\",peru:\"CD853F\",pink:\"FFC0CB\",plum:\"DDA0DD\",powderblue:\"B0E0E6\",purple:\"800080\",rebeccapurple:\"663399\",red:\"FF0000\",rosybrown:\"BC8F8F\",royalblue:\"4169E1\",saddlebrown:\"8B4513\",salmon:\"FA8072\",sandybrown:\"F4A460\",seagreen:\"2E8B57\",seashell:\"FFF5EE\",sienna:\"A0522D\",silver:\"C0C0C0\",skyblue:\"87CEEB\",slateblue:\"6A5ACD\",slategray:\"708090\",slategrey:\"708090\",snow:\"FFFAFA\",springgreen:\"00FF7F\",steelblue:\"4682B4\",tan:\"D2B48C\",teal:\"008080\",thistle:\"D8BFD8\",tomato:\"FF6347\",turquoise:\"40E0D0\",violet:\"EE82EE\",wheat:\"F5DEB3\",white:\"FFFFFF\",whitesmoke:\"F5F5F5\",yellow:\"FFFF00\",yellowgreen:\"9ACD32\"},i=.618033988749895,u={hue:null,saturation:null,value:null,base_color:\"\",greyscale:!1,grayscale:!1,golden:!0,full_random:!1,colors_returned:1,format:\"hex\",seed:null},c={scheme_type:\"analogous\",format:\"hex\"},h={golden:!1,format:\"hex\"};return F.NAME_to_HEX=function(e){return e=e.toLowerCase(),e in s?s[e]:(console.error(\"Color name not recognized.\"),void 0)},F.NAME_to_RGB=function(e){return F.HEX_to_RGB(F.NAME_to_HEX(e))},F.NAME_to_HSV=function(e){return F.HEX_to_HSV(F.NAME_to_HEX(e))},F.HEX_to_RGB=function(e){var r=/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;e=e.replace(r,function(e,r,a,o){return r+r+a+a+o+o});var a=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(e);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},F.RGB_to_HEX=function(e){return\"#\"+((1<<24)+(e.r<<16)+(e.g<<8)+e.b).toString(16).slice(1)},F.HSV_to_RGB=function(e){var r,a,o,n,t,l,F,s,i=e.h,u=e.s,c=e.v;if(0===u)return{r:c,g:c,b:c};switch(i/=60,n=Math.floor(i),t=i-n,l=c*(1-u),F=c*(1-u*t),s=c*(1-u*(1-t)),n){case 0:r=c,a=s,o=l;break;case 1:r=F,a=c,o=l;break;case 2:r=l,a=c,o=s;break;case 3:r=l,a=F,o=c;break;case 4:r=s,a=l,o=c;break;case 5:r=c,a=l,o=F}return{r:Math.floor(255*r),g:Math.floor(255*a),b:Math.floor(255*o)}},F.RGB_to_HSV=function(e){var r=e.r/255,a=e.g/255,o=e.b/255,n=0,t=0,l=0,F=Math.min(r,Math.min(a,o)),s=Math.max(r,Math.max(a,o));if(F===s)return l=F,{h:0,s:0,v:l};var i=r===F?a-o:o===F?r-a:o-r,u=r===F?3:o===F?1:5;return n=60*(u-i/(s-F)),t=(s-F)/s,l=s,{h:n,s:t,v:l}},F.HSV_to_HEX=function(e){return F.RGB_to_HEX(F.HSV_to_RGB(e))},F.HEX_to_HSV=function(e){return F.RGB_to_HSV(F.HEX_to_RGB(e))},F.make_scheme=function(e,r){function n(e){return{h:e.h,s:e.s,v:e.v}}var l,F,s,i,u,h=t(c);if(null!==r)for(var d in r)r.hasOwnProperty(d)&&(h[d]=r[d]);var g=[e];switch(h.scheme_type.toLowerCase()){case\"monochromatic\":case\"mono\":for(u=1;2>=u;u++)l=n(e),s=l.s+.1*u,s=a(s,0,1),i=l.v+.1*u,i=a(i,0,1),l.s=s,l.v=i,g.push(l);for(u=1;2>=u;u++)l=n(e),s=l.s-.1*u,s=a(s,0,1),i=l.v-.1*u,i=a(i,0,1),l.s=s,l.v=i,g.push(l);break;case\"complementary\":case\"complement\":case\"comp\":l=n(e),l.h=(l.h+180)%360,g.push(l);break;case\"split-complementary\":case\"split-complement\":case\"split\":l=n(e),l.h=(l.h+165)%360,g.push(l),l=n(e),l.h=Math.abs((l.h-165)%360),g.push(l);break;case\"double-complementary\":case\"double-complement\":case\"double\":l=n(e),l.h=(l.h+180)%360,g.push(l),l.h=(l.h+30)%360,F=n(l),g.push(l),l.h=(l.h+180)%360,g.push(F);break;case\"analogous\":case\"ana\":for(u=1;5>=u;u++)l=n(e),l.h=(l.h+20*u)%360,g.push(l);break;case\"triadic\":case\"triad\":case\"tri\":for(u=1;3>u;u++)l=n(e),l.h=(l.h+120*u)%360,g.push(l);break;default:console.error(\"Color scheme not recognized.\")}return o(h.format.toLowerCase(),g),g},F.make_color=function(n){var s=[],c=t(u),h=null;if(null!==n)for(var d in n)n.hasOwnProperty(d)&&(c[d]=n[d]);var g=null;\"string\"==typeof c.seed&&(g=new l(c.seed)),c.base_color.length>0&&(h=c.base_color.match(/^#?([0-9a-f]{3})([0-9a-f]{3})?$/i)?F.HEX_to_HSV(c.base_color):F.NAME_to_HSV(c.base_color));for(var m=0;m<c.colors_returned;m++){var f,E,b,p=e(0,360,g);null!==h?(f=a(e(h.h-5,h.h+5,g),0,360),E=0===h.s?0:r(.4,.85,g),b=r(.4,.85,g),s.push({h:f,s:E,v:b})):(f=c.greyscale===!0||c.grayscale===!0?0:c.golden===!0?(p+p/i)%360:null===c.hue||c.full_random===!0?p:a(c.hue,0,360),E=c.greyscale===!0||c.grayscale===!0?0:c.full_random===!0?r(0,1,g):null===c.saturation?.4:a(c.saturation,0,1),b=c.full_random===!0?r(0,1,g):c.greyscale===!0||c.grayscale===!0?r(.15,.75,g):null===c.value?.75:a(c.value,0,1),s.push({h:f,s:E,v:b}))}return o(c.format.toLowerCase(),s),s},F.make_contrast=function(e,r){var l=t(h);if(null!==r)for(var s in r)r.hasOwnProperty(s)&&(l[s]=r[s]);var u,c,d=n(e);if(l.golden===!0)c=e.h*(1+i)%360;else{var g=F.make_scheme(e,{scheme_type:\"complementary\",format:\"hsv\"})[1];c=a(g.h-30,0,360)}var m;return\"dark\"===d?m=a(e.v-.25,0,1):\"light\"===d&&(m=a(e.v+.25,0,1)),u=[{h:c,s:e.s,v:m}],o(l.format.toLowerCase(),u),u[0]},F}return e()});","// @flow\n\nimport SLW from './SLW'\nimport Tile from './Tile'\nimport { crop } from './util'\n\n// Browser editor for SLW levels.\nexport default class BrowserSLW {\n  header: HTMLElement\n\n  game: SLW\n\n  constructor(game: SLW) {\n    this.game = game\n    this.header = document.getElementById('header')\n\n    // Editor toggle -----------------------\n    const editorToggle = this.addToggle(class extends Toggle {\n      onCreate() {\n        this.setTitle('Editor Mode')\n        this.setChecked(false)\n        this.setDisabled(true)\n      }\n\n      onCheckedChsfddanged() {\n        const el = document.getElementById('toolbar')\n        if (this.checked) {\n          /*\n          let tiles = [ '=', '-', '?', 'x', '~', 'C', 'P', '0' ]\n          let tileEls: Array <Image> = []\n\n          for (let tileid of tiles) {\n            const tile = new (Tile.get(tileid))(game)\n\n            let img = crop(game.level.tileset, Tile.size, Tile.size, tile.texPosition[0] * Tile.size, tile.texPosition[1] * Tile.size)\n            img.classList.add('tile')\n\n            img.addEventListener('click', evt => {\n              for (let tileEl of tileEls) tileEl.classList.remove('selected')\n\n              img.classList.add('selected')\n              game.tileToPaint = Tile.get(tileid)\n            })\n\n            tileEls.push(img)\n            el.appendChild(img)\n          }\n\n          tileEls[0].click()\n          */\n        } else {\n          el.innerHTML = ''\n        }\n\n        game.level.editorEnabled = this.checked\n      }\n    })\n\n    game.events.addEventListener('levelchanged', ({ level }) => {\n      if (level.meta.special.includes('world')) {\n        editorToggle.setDisabled(true)\n      } else {\n        editorToggle.setDisabled(false)\n      }\n    })\n\n    // Gamepad toggle ----------------------\n    this.addToggle(class extends Toggle {\n      onCreate() {\n        this.setTitle('Gamepad')\n        this.load('gamepad-support')\n\n        if (!game.gamepadSupport) {\n          this.setDisabled(true)\n        }\n      }\n\n      onDestroy() {\n        this.save('gamepad-support')\n      }\n\n      onCheckedChanged() {\n        game.gamepadEnabled = this.checked\n      }\n    })\n  }\n\n  // Add a global toggle control.\n  addToggle(toggleClass: Class<Toggle>) {\n    const toggle = new toggleClass()\n\n    const toggles = this.header.querySelector('#toggles')\n    toggles.appendChild(toggle.btn)\n\n    return toggle\n  }\n}\n\nclass Toggle {\n  checked: boolean\n  disabled: boolean\n\n  btn: HTMLElement\n\n  constructor() {\n    this.btn = document.createElement('button')\n\n    this.btn.addEventListener('click', () => {\n      this.setChecked(!this.checked)\n    })\n\n    this.onCreate()\n\n    window.addEventListener('beforeunload', () => {\n      this.onDestroy()\n    })\n  }\n\n  setChecked(newChecked: boolean) {\n    this.checked = newChecked\n    if (this.checked) {\n      this.btn.classList.add('checked')\n      this.btn.classList.remove('unchecked')\n    } else {\n      this.btn.classList.remove('checked')\n      this.btn.classList.add('unchecked')\n    }\n\n    this.onCheckedChanged()\n  }\n\n  setDisabled(newDisabled: boolean) {\n    this.disabled = newDisabled\n    if (newDisabled) {\n      this.btn.setAttribute('disabled', 'true')\n    } else {\n      this.btn.removeAttribute('disabled')\n    }\n  }\n\n  setTitle(newTitle: string) {\n    while (this.btn.firstChild) {\n      this.btn.removeChild(this.btn.firstChild)\n    }\n\n    this.btn.appendChild(document.createTextNode(newTitle))\n  }\n\n  load(key: string) {\n    if (localStorage['toggle-' + key] === 'true') {\n      this.setChecked(true)\n    } else {\n      this.setChecked(false)\n    }\n  }\n\n  save(key: string) {\n    localStorage['toggle-' + key] = this.checked.toString()\n  }\n\n  onCreate() {}\n  onCheckedChanged() {}\n  onDestroy() {}\n}\n","// @flow\n\nimport type { Position } from './types'\n\n// Generic Cursor class designed to be easy to implement multiple control\n// schemes for. For example, mouse, tablet touch, and gamepad are all possible\n// controls that could be implemented.\nexport default class Cursor {\n\n  // Position of the cursor.\n  pos: Position\n\n  // Whether the cursor is pressed or not.\n  down: boolean\n\n  // Cursor image to be drawn. This image's source is (by default)\n  // cursor.png, loaded from the sprites folder.\n  image: Image\n\n  scale: [number, number]\n\n  constructor(scale: [number, number] = [1, 1]) {\n    this.scale = scale\n    this.pos = [0, 0]\n    this.down = false\n    this.image = new Image()\n    this.image.src = 'sprites/cursor.png'\n  }\n\n  // Watch the mouse's movement on an element, and use its position as the\n  // position for this cursor.\n  watchMouse(el: Element) {\n    el.addEventListener('mousemove', (evt: MouseEvent) => {\n      // Stored position should be relative to element's rendered bounds.\n      let rect = el.getBoundingClientRect()\n      this.pos[0] = (evt.clientX - rect.left) * this.scale[0]\n      this.pos[1] = (evt.clientY - rect.top) * this.scale[1]\n    })\n\n    el.addEventListener('mouseup', () => {\n      this.down = false\n    })\n\n    el.addEventListener('mousedown', () => {\n      this.down = true\n    })\n  }\n\n  // Draw using an already-created canvas context. Optionally takes an X/Y\n  // position to draw at, which defaults to this.pos[0, 1].\n  drawUsingCtx(\n    ctx: CanvasRenderingContext2D,\n    // @flow ignore\n    x: number = this.pos[0], y: number = this.pos[1]\n  ) {\n    const centeredX = x - this.image.width / 2\n    const centeredY = y - this.image.height / 2\n    ctx.drawImage(this.image, centeredX, centeredY)\n  }\n}\n","// @flow\n\nconst DEBUG = false // lags lots but is helpful\nconst GRAVITY = 0.25\n\nimport SLW from './SLW'\nimport Tile from './Tile'\nimport Level from './Level'\nimport Text from './Text'\nimport { Sound } from './SoundManager'\n\nimport {\n  sign, levels,\n  isJump, isYes, isLeft, isRight, isUp, isDown\n} from './util'\n\nimport type { Position } from './types'\n\nexport class Entity {\n  game: SLW\n\n  // Position, absolute (not tileX/Y!)\n  x: number\n  y: number\n\n  // order in which entity is rendered\n  z: number\n\n  // Velocity\n  xv: number\n  yv: number\n\n  // Dimensions (used for bounding box)\n  w: number // width\n  h: number // height\n\n  color: string // \"rgba(r, g, b, a)\"\n  sprite: {\n    sheet: Image,\n    position: Position,\n    positionType: ?string,\n    width: number,\n    height: number\n  }\n\n  get top(): number {\n    return Math.floor(this.y)\n  }\n\n  get bottom(): number {\n    return Math.floor(this.y + this.h)\n  }\n\n  get left(): number {\n    return Math.floor(this.x)\n  }\n\n  get right(): number {\n    return Math.floor(this.x + this.w)\n  }\n\n  constructor(game: SLW) {\n    this.game = game\n\n    this.sprite = {\n      sheet: new Image(),\n      position: [0, 0],\n      positionType: '',\n      width: 0,\n      height: 0\n    }\n\n    this.x = 0\n    this.y = 0\n    this.z = 0\n\n    this.xv = 0\n    this.yv = 0\n\n    this.w = 16\n    this.h = 16\n\n    // pleasing color for debugging reasons :P\n    const c = require('pleasejs').make_color({ format: 'rgb' })[0]\n    this.color = `rgb(${c.r}, ${c.g}, ${c.b})`\n  }\n\n  update(stop: boolean = true) {\n    let v: number = 0\n\n    // x:\n    const xv = Math.round(this.xv)\n    v = sign(xv)\n\n    for (let i = 0; i < Math.abs(xv); i++) {\n      this.x += v\n      if (this.touchingWallRight || this.touchingWallLeft) {\n        this.x -= v\n        if (stop) this.xv = 0\n      }\n    }\n\n    // y:\n    const yv = Math.floor(this.yv)\n    v = sign(yv)\n\n    for (let i = 0; i < Math.abs(yv); i++) {\n      this.y += v\n\n      // Checking if grounded should only happen if the entity is going down\n      // (that way it can jump through solidTop blocks)\n      if ((v === 1 && this.grounded) || this.collides()) {\n        this.y -= v\n        if (stop) this.yv = 0\n\n        this.y = Math.ceil(this.y / Tile.size) * Tile.size\n\n        // Air punch should only happen when the entity jumps.\n        if (v === -1) {\n          for (let tile of this.tilesAbove) {\n            tile.onAirPunch(this)\n          }\n        }\n      }\n    }\n\n    if ((this.y >= this.game.level.h * Tile.size) && !this.game.level.meta.special.includes('world'))\n      return this.destroy()\n\n    for (let tile of this.pickTiles(0, 0, 0, 1)) {\n      tile.onTouch(this)\n    }\n\n    for (let tile of this.tilesBelow) {\n      tile.onStand(this)\n    }\n\n    for (let entity of this.entityCollides()) {\n      entity.onTouch(this)\n    }\n  }\n\n  draw() {\n    const ctx = this.game.canvas.getContext('2d')\n    if (!(ctx instanceof CanvasRenderingContext2D)) return\n\n    if (DEBUG) {\n      // Draw the bounding box (if in DEBUG mode).\n      ctx.fillStyle = this.color\n      ctx.fillRect(this.left, this.top, this.w + 1, this.h + 1)\n\n      ctx.drawImage(Text.write(this.constructor.name, this.color), this.right, this.bottom)\n    }\n\n    // Draw the sprite image (if there is one).\n    const sprite = this.sprite\n\n    if (sprite) {\n      let [x, y] = sprite.position || [0, 0]\n      let w = sprite.width || this.w\n      let h = sprite.height || this.h\n\n      if (sprite.positionType !== 'absolute') {\n        x *= w\n        y *= h\n      }\n\n      ctx.drawImage(\n        this.sprite.sheet,\n\n        // Area on sheet to grab\n        x, y, w, h,\n\n        // Area on screen to draw\n        this.left, this.top, w, h\n      )\n    }\n  }\n\n  // Are we currently intersecting any solid Tiles?\n  collides(shouldReturnTiles: boolean = false): any {\n    let tileLeft   = Math.floor(this.left   / Tile.size)\n    let tileRight  = Math.floor(this.right  / Tile.size)\n    let tileTop    = Math.floor(this.top    / Tile.size)\n    let tileBottom = Math.floor(this.bottom / Tile.size)\n\n    let tiles = []\n    let collision = false\n    for (let x = tileLeft; x <= tileRight; x++) {\n      for (let y = tileTop; y <= tileBottom; y++) {\n        let tile = this.game.level.tileAt([x, y])\n\n        if (tile.solid) {\n          collision = true\n        }\n\n        tiles.push(tile)\n      }\n    }\n\n    return shouldReturnTiles ? tiles : collision\n  }\n\n  get touchingWallRight(): boolean {\n    let tileLeft   = Math.floor(this.right  / Tile.size)\n    let tileRight  = tileLeft\n    let tileTop    = Math.floor(this.top    / Tile.size)\n    let tileBottom = Math.floor(this.bottom / Tile.size)\n\n    // Weird bug.. dunno why this (helps) fix #19 though. I can't imagine\n    // tileBottom is broken! (Right?)\n    // TODO Figure this out. Right now it's a plain fix for height=16\n    if (this.h === 16) {\n      tileBottom--\n    }\n\n    for (let x = tileLeft; x <= tileRight; x++) {\n      for (let y = tileTop; y <= tileBottom; y++) {\n        const tile = this.game.level.tileAt([x, y])\n\n        if (tile.solid) {\n          return true\n        }\n      }\n    }\n\n    return false\n  }\n\n  get touchingWallLeft(): boolean {\n    let tileLeft   = Math.floor(this.left   / Tile.size)\n    let tileRight  = tileLeft\n    let tileTop    = Math.floor(this.top    / Tile.size)\n    let tileBottom = Math.floor(this.bottom / Tile.size)\n\n    // Same deal as touchingWallRight\n    if (this.h === 16) {\n      tileBottom--\n    }\n\n    for (let x = tileLeft; x <= tileRight; x++) {\n      for (let y = tileTop; y <= tileBottom; y++) {\n        const tile = this.game.level.tileAt([x, y])\n\n        if (tile.solid) {\n          return true\n        }\n      }\n    }\n\n    return false\n  }\n\n  // Handy function to pick tiles around the entity.\n  // TODO is this broken? Do tests!\n  pickTiles(\n    tileLeft: number, tileRight: number, tileTop: number, tileBottom: number\n  ): Array <Tile> {\n    const tiles = []\n\n    for (let px = Math.floor(tileLeft); px <= Math.ceil(tileRight); px++) {\n      for (let py = Math.floor(tileTop); py <= Math.ceil(tileBottom); py++) {\n        tiles.push(this.game.level.tileAt([\n          tileLeft + px + this.x / Tile.size, tileTop + py + this.y / Tile.size\n        ]))\n      }\n    }\n\n    return tiles\n  }\n\n  // Handy function to destroy the entity.\n  destroy() {\n    this.game.entities.splice(this.game.entities.indexOf(this), 1)\n  }\n\n  // What entities are we touching?\n  entityCollides(): Array <Entity> {\n    const entities = []\n\n    for (let entity of this.game.entities) {\n      // Don't detect itself!\n      if (entity === this) continue\n\n      if (\n        (\n          this.left <= entity.left && entity.left <= this.right ||\n          this.left <= entity.right && entity.right <= this.right\n        ) && (\n          this.top <= entity.top && entity.top <= this.bottom ||\n          this.top <= entity.bottom && entity.bottom <= this.bottom\n        )\n      ) {\n        entities.push(entity)\n      }\n    }\n\n    return entities\n  }\n\n  // Get the single tile at the centre of the entity.\n  get tileOn(): Tile {\n    let t = this.game.level.tileAt([\n      Math.floor((this.x + this.w / 2) / 16),\n      Math.floor((this.y + this.h / 2) / 16)\n    ])\n\n    return t\n  }\n\n  // Get the two (potentially same) tiles ABOVE the entity.\n  get tilesAbove(): [Tile, Tile] {\n    let l = this.game.level.tileAt([Math.floor(this.x / 16), this.top / 16 - 0.1])\n    let r = this.game.level.tileAt([Math.ceil(this.x / 16), this.top / 16 - 0.1])\n\n    return [l, r]\n  }\n\n  // Get the two (potentially same) tiles BELOW the entity.\n  get tilesBelow(): [Tile, Tile] {\n    let l = this.game.level.tileAt([Math.floor(this.x / 16), this.bottom / 16 + 0.1])\n    let r = this.game.level.tileAt([Math.ceil(this.x / 16), this.bottom / 16 + 0.1])\n\n    return [l, r]\n  }\n\n  // Whether or not the entity is on the ground or not.\n  get grounded(): boolean {\n    /*\n    return this.pickTiles(0, 0, 1, 1).some(x => x.solid || x.solidTop)\n    */\n\n    return this.tilesBelow.some(tile => tile.solid || tile.solidTop)\n  }\n\n  // Called when another entity touches this entity.\n  onTouch(by: Entity) {}\n}\n\nexport class Player extends Entity {\n  errorSound: Sound\n  startLevelSound: Sound\n  moveLevelSound: Sound\n  jumpSound: Sound\n\n  lastJump: number\n  mayJump: boolean\n\n  spriteAnimation: {\n    time: number,\n    anim: string,\n    dir: string,\n    oldAnim: string,\n    nextFrame: number,\n  }\n\n  state: number // powerup state\n\n  lastOn: ?Tile // world map only.\n  wantsInput: ?boolean // world map only.\n\n  constructor(game: SLW, x: number = 0, y:number = 0) {\n    super(game)\n\n    this.sprite.sheet.src = 'sprites/liam-0.png'\n    this.sprite.position = [-100, -100]\n    this.sprite.positionType = 'absolute'\n    this.sprite.width = 19\n    this.sprite.height = 32\n    this.spriteAnimation = { time: 0, dir: 'right', anim: 'idle', oldAnim: '', nextFrame: 0 }\n\n    this.x = x\n    this.y = y\n\n    this.w = 15\n    this.h = 15\n    this.state = 0\n\n    this.errorSound = this.game.sounds.getSound('smw_stomp_koopa_kid.wav')\n    this.startLevelSound = this.game.sounds.getSound('begin_level')\n    this.moveLevelSound = this.game.sounds.getSound('move_level')\n    this.jumpSound = this.game.sounds.getSound('smw_jump')\n  }\n\n  update() {\n    if (this.game.level.editorEnabled) {\n      // Camera is scrolled directly in editor mode\n      this.xv = 0\n      this.yv = 0\n      return\n    }\n\n    this.sprite.sheet.src = `sprites/liam-${this.state}.png`\n    if (this.state > 0) {\n      // big/powerupped\n      this.w = 15\n      this.h = 31\n      this.sprite.width = 19\n      this.sprite.height = 32\n      this.sprite.positionType = 'absolute'\n    } else {\n      // small\n      this.w = 15\n      this.h = 15\n      this.sprite.width = 16\n      this.sprite.height = 16\n    }\n\n    if (this.game.level.meta.special.includes('world')) {\n      this.mapMotion()\n    } else {\n      this.levelMotion()\n    }\n\n    // actually move:\n    super.update(this.wantsInput == true || !this.game.level.meta.special.includes('world'))\n\n\n    // If the player moved in the world map..\n    if (\n      this.game.level.meta.special.includes('world') && (this.xv || this.yv)\n    ) {\n      // If the player wanted input, make a sound.\n      if (this.wantsInput) {\n        this.moveLevelSound.playNew()\n      }\n\n      // Now it's moving so it shouldn't take input anymore.\n      this.wantsInput = false\n    }\n  }\n\n  mapMotion() {\n    // overworld/map..\n    const walkSpeed = 4\n\n    // small hitbox allows for greater movement\n    // TODO\n    this.w = 15\n    this.h = 15\n\n    // A different version of tileOn. This one only counts a new tile if you're\n    // actually 100% on it - that is, if tileX and tileY are integers.\n    let on: ?Tile\n    const tileX = this.left / Tile.size\n    const tileY = this.top / Tile.size\n    if (Number.isInteger(tileX) && Number.isInteger(tileY)) {\n      on = this.game.level.tileAt([tileX, tileY])\n    } else {\n      on = this.lastOn\n    }\n\n    // Initial\n    if (!this.lastOn) {\n      this.wantsInput = true\n    }\n\n    // Levels, houses and pipes should let the user take input. If it's the\n    // same tile as the player was just on a tick ago, there's no need to give\n    // more input - if it does, the actual user needs to hold down whatever\n    // direcitonal button they're moving in until the player gets off that\n    // tile!\n    if (on &&\n      ['Level', 'House', 'Pipe'].includes(on.name) && on !== this.lastOn\n    ) {\n      this.wantsInput = true\n    }\n\n    if (on && on.name === 'Path' && !this.wantsInput) {\n      // we're already moving!\n\n      this.spriteAnimation.anim = 'walk'\n      if (this.xv > 0) this.spriteAnimation.dir = 'right'\n      if (this.xv < 0) this.spriteAnimation.dir = 'left'\n      if (this.yv > 0) this.spriteAnimation.dir = 'down'\n      if (this.yv < 0) this.spriteAnimation.dir = 'up'\n\n      // we need to be on a NEW tile to do anything:\n      if (!this.lastOn || on.texPosition !== this.lastOn.texPosition) {\n        const [h, v] = on.texPosition\n\n        if (h == 2 && v == 8) {\n          // vertical straight\n        }\n\n        if (h == 1 && v == 9) {\n          // horizontal straight\n        }\n\n        if (h == 3 && v == 9) {\n          // up/left turn\n\n          if (this.yv === 0) {\n            // from left\n            this.xv = 0\n            this.yv = -walkSpeed\n          } else {\n            // from up\n            this.xv = -walkSpeed\n            this.yv = 0\n          }\n        }\n\n        if (h == 3 && v == 8) {\n          // down/right turn\n\n          if (this.yv === 0) {\n            // from right\n            this.xv = 0\n            this.yv = walkSpeed\n          } else {\n            // from down\n            this.xv = walkSpeed\n            this.yv = 0\n          }\n        }\n\n        if (h == 1 && v == 8) {\n          // up/right turn\n\n          if (this.yv === 0) {\n            // from right\n            this.xv = 0\n            this.yv = -walkSpeed\n          } else {\n            // from up\n            this.xv = walkSpeed\n            this.yv = 0\n          }\n        }\n\n        if (h == 1 && v == 10) {\n          // down/left turn\n\n          if (this.yv === 0) {\n            // from left\n            this.xv = 0\n            this.yv = walkSpeed\n          } else {\n            // from down\n            this.xv = -walkSpeed\n            this.yv = 0\n          }\n        }\n\n        if (h == 2 && v == 10) {\n          // up/down T-junction\n          this.xv = 0\n          this.yv = 0\n          this.wantsInput = true\n        }\n      }\n    } else if (this.wantsInput) {\n      this.xv = 0\n      this.yv = 0\n\n      // take input..\n      // TODO don't allow passing by [3, 10] tiles (uncompleted levels)\n      this.spriteAnimation.anim = 'idle'\n\n      if (isRight(this.game.keys)) {\n        this.xv = walkSpeed\n        this.spriteAnimation.dir = 'right'\n      } else if (this.xv > 0) {\n        this.xv = 0\n      }\n\n      if (isLeft(this.game.keys)) {\n        this.xv = -walkSpeed\n        this.spriteAnimation.dir = 'left'\n      } else if (this.xv < 0) {\n        this.xv = 0\n      }\n\n      if (isDown(this.game.keys)) {\n        this.yv = walkSpeed\n        this.spriteAnimation.dir = 'down'\n      } else if (this.yv > 0) {\n        this.yv = 0\n      }\n\n      if (isUp(this.game.keys)) {\n        this.yv = -walkSpeed\n        this.spriteAnimation.dir = 'up'\n      } else if (this.yv < 0) {\n        this.yv = 0\n      }\n\n      if (on && on.name === 'Level' && isYes(this.game.newKeys)) {\n        // open level!\n        // TODO some animation?\n\n        const lv = this.game.level.meta.id + '-' + on.levelid\n\n        if (lv in levels) {\n          this.w = 15\n          this.h = 31\n\n          const newLevel = new Level(this.game, lv, this.game.level.tileset)\n          this.game.changeLevel(newLevel)\n\n          this.game.tick = 0\n          this.startLevelSound.playNew()\n        } else {\n          this.errorSound.playNew()\n        }\n      }\n    }\n\n    this.lastOn = on\n  }\n\n  levelMotion() {\n    // input:\n\n    if (Math.abs(this.xv) < 0.2 && this.grounded) {\n      this.spriteAnimation.anim = 'idle'\n    }\n\n    if (isRight(this.game.keys)) {\n      this.xv += 0.2\n      if (this.grounded) this.spriteAnimation.anim = 'walk'\n    } else if(this.xv > 0) {\n      this.xv = Math.max(0, this.xv - 0.4)\n    }\n\n    if (isLeft(this.game.keys)) {\n      // xv\n      this.xv -= 0.2\n      if (this.grounded) this.spriteAnimation.anim = 'walk'\n    } else if(this.xv < 0) {\n      this.xv = Math.min(0, this.xv + 0.4)\n    }\n\n    if (Math.abs(this.xv) < 0.1) {\n      this.xv = 0\n    }\n\n    this.xv = Math.min(this.xv,  4)\n    this.xv = Math.max(this.xv, -4)\n\n    if (this.grounded && isJump(this.game.keys) && this.mayJump) {\n      // jump height is based on how long you hold the key[s]\n      // you can hold it for longer if your xv is higher\n\n      this.yv = -3.5\n      this.lastJump = Date.now()\n\n      this.jumpSound.playNew()\n      this.spriteAnimation.anim = 'jump'\n      this.mayJump = false\n    } else if(isJump(this.game.keys) && this.yv < -3 && Date.now() - this.lastJump < 100 + Math.abs(this.xv) * 50) {\n      this.yv = -3.5\n    } else if(!isJump(this.game.keys)) {\n      // we may jump next frame\n      this.mayJump = true\n    }\n\n    if(this.yv > 0 && this.spriteAnimation.anim !== 'jump' && !this.grounded) {\n      this.spriteAnimation.anim = 'fall'\n    }\n\n    if(this.xv > 0) this.spriteAnimation.dir = 'right'\n    if(this.xv < 0) this.spriteAnimation.dir = 'left'\n\n    this.yv = Math.min(this.yv,  4)\n    this.yv += GRAVITY\n  }\n\n  draw() {\n    // Animation..\n    const anim = this.spriteAnimation\n    if (anim.anim !== anim.oldAnim) {\n      anim.oldAnim = anim.anim\n      anim.time = 0\n      anim.nextFrame = 0\n    }\n\n    if (anim.anim === 'walk' || (anim.anim === 'idle' && anim.oldAnim === 'walk')) {\n      if (anim.time >= anim.nextFrame) {\n        anim.nextFrame = (\n          Math.ceil(anim.time + Math.max(12 - Math.abs(this.xv * 3), 8))\n        )\n\n        if (this.state === 0) {\n          if (this.sprite.position[0] === 32) {\n            this.sprite.position[0] = 0\n          } else if (this.sprite.position[0] === 16) {\n            this.sprite.position[0] = 32\n          } else if (this.sprite.position[0] === 0) {\n            if(anim.anim === 'walk') this.sprite.position[0] = 16\n          } else {\n            this.sprite.position[0] = 0\n          }\n        } else {\n          if (this.sprite.position[0] === 57) {\n            this.sprite.position[0] = 0\n          } else if (this.sprite.position[0] === 38) {\n            this.sprite.position[0] = 57\n          } else if (this.sprite.position[0] === 19) {\n            if(anim.anim === 'walk') this.sprite.position[0] = 38\n          } else {\n            this.sprite.position[0] = 19\n          }\n        }\n      }\n    } else if (anim.anim === 'idle') {\n      this.sprite.position[0] = this.state === 0 ? 0 : 19\n    } else if (anim.anim === 'jump') {\n      this.sprite.position[0] = this.state === 0 ? 48 : 76\n    } else if (anim.anim === 'fall') {\n      this.sprite.position[0] = this.state === 0 ? 32 : 97\n    }\n\n    this.sprite.position[1] = this.state === 0 ? ({\n      left: 16,\n      right: 0,\n      up: 48,\n      down: 32,\n    })[anim.dir] : (anim.dir === 'left' ? 32 : 0)\n    this.spriteAnimation.time++ // could use this.game.tick\n\n    super.draw()\n  }\n\n  destroy() {\n    // go back to world map:\n\n    const lv = this.game.level.meta.world\n    const id = this.game.level.meta.id\n\n    const newLevel = new Level(this.game, lv, this.game.level.tileset)\n    this.game.changeLevel(newLevel)\n\n    this.state = 0\n\n    // On the world map, go to the position of the level that was just played.\n    /*\n    for (let row of this.game.level.tilemap) {\n      for (let tile of row) {\n        if (tile.name === 'Level' && tile.levelid == id) {\n          this.x = tile.x * Tile.size\n          this.y = tile.y * Tile.size\n        }\n      }\n    }\n    */\n  }\n}\n\nexport class Goomba extends Entity {\n  constructor(game: SLW, x: number = 0, y: number = 0) {\n    super(game)\n\n    this.x = x\n    this.y = y\n    this.z = 1\n\n    this.w = 16\n    this.h = 16\n\n    this.xv = 2\n  }\n\n  update() {\n    // TODO goombas walk and then turn around when they bump into something\n\n    this.yv += GRAVITY\n    super.update()\n  }\n}\n\nexport class Powerup extends Entity {\n  getSound: window.Audio\n  initSound: window.Audio\n\n  constructor(game: SLW, x: number = 0, y: number = 0, xv: number = 1) {\n    super(game)\n\n    this.sprite.sheet.src = 'tileset.png'\n\n    this.x = x\n    this.y = y\n    this.z = 2\n\n    this.w = 16\n    this.h = 16\n\n    this.xv = xv\n    this.sprite.position = [0, 0]\n\n    this.game.sounds.getSound('powerup_init').playNew()\n\n    this.getSound = this.game.sounds.getSound('powerup_get')\n  }\n\n  update() {\n    this.yv += GRAVITY * 0.7\n\n    let o = this.xv\n\n    this.x += this.xv\n    if (this.touchingWallRight || this.touchingWallLeft) o = this.xv * -1\n    this.x -= this.xv\n\n    this.xv = o\n\n    super.update()\n  }\n\n  onTouch(by: Entity) {\n    if (by instanceof Player) {\n      this.destroy()\n      this.getSound.playNew()\n    }\n  }\n}\n\nexport class Mushroom extends Powerup {\n  constructor(...args: any) {\n    super(...args)\n\n    this.sprite.position = [0, 2]\n  }\n\n  onTouch(by: Entity) {\n    if (by instanceof Player && by.state === 0) {\n      by.state = 1 // small to big\n      by.y -= Tile.size\n    }\n\n    super.onTouch(by)\n  }\n}\n\nexport class Sign extends Entity {\n  constructor(game: SLW, x: number = 0, y: number = 0) {\n    super(game)\n\n    this.x = x\n    this.y = y\n\n    this.w = 44\n    this.h = 45\n\n    this.game.entities.push(this)\n\n    this.sprite.sheet.src = 'tileset.png'\n    this.sprite.positionType = 'absolute'\n    this.sprite.position = [80, 32]\n    this.sprite.width = 44\n    this.sprite.height = 47\n  }\n}\n\nexport class Coin extends Entity {\n  coinSound: Sound\n\n  spriteAnimation: {\n    time: number,\n    nextFrame: number\n  }\n\n  constructor(game: SLW, x: number = 0, y: number = 0) {\n    super(game)\n\n    this.x = x\n    this.y = y\n\n    this.w = 16\n    this.h = 16\n\n    this.sprite.sheet.src = 'sprites/coin.png'\n    this.sprite.width = 16\n    this.sprite.height = 16\n\n    this.spriteAnimation = {time: 0, nextFrame: 0}\n\n    this.coinSound = this.game.sounds.getSound('smw_coin')\n  }\n\n  update() {\n    const anim = this.spriteAnimation\n\n    if (anim.time >= anim.nextFrame) {\n      anim.nextFrame = anim.time + 10\n      this.sprite.position[0] = (this.sprite.position[0] + 1) % 4\n    }\n\n    anim.time++\n  }\n\n  onTouch(by: Entity) {\n    if(by instanceof Player) {\n      this.coinSound.playNew()\n      this.destroy()\n    }\n  }\n}\n\nexport class HalfwayFlag extends Entity {\n  spriteAnimation: {\n    time: number,\n    nextFrame: number,\n    frame: number,\n  }\n\n  state: number // 0 = bowser, 1 = liam\n\n  constructor(game: SLW, x: number = 0, y: number = 0) {\n    super(game)\n\n    this.x = x\n    this.y = y - 16\n\n    this.w = 16\n    this.h = 16 + 17\n\n    this.state = 0\n    this.game.entities.push(this)\n\n    this.sprite.sheet.src = 'sprites/flag.png'\n    this.sprite.width = 16\n    this.sprite.height = 16\n    this.sprite.positionType = 'absolute'\n\n    this.spriteAnimation = { time: 0, nextFrame: 0, frame: 0 }\n  }\n\n  update() {\n    const anim = this.spriteAnimation\n\n    if (anim.time >= anim.nextFrame) {\n      anim.nextFrame = anim.time + 10\n      anim.frame = (anim.frame + 1) % 4\n    }\n\n    anim.time++\n\n    this.sprite.position[0] = ([ 18, 35, 52, 69 ])[anim.frame]\n    this.sprite.position[1] = ([ 1, 35 ])[this.state]\n  }\n\n  draw() {\n    const ctx = this.game.canvas.getContext('2d')\n    if (!ctx) return\n\n    ctx.drawImage(this.sprite.sheet,\n      // Area on sheet to grab\n      1, 1, 16, 48,\n\n      // Area on screen to draw\n      this.left - 10, this.top - 16, 16, 48)\n    super.draw()\n  }\n\n  onTouch(by: Entity) {\n    if(by instanceof Player) {\n      // TODO play a sound and an animation\n      this.state = 1\n    }\n  }\n}\n","// @flow\n\nconst MUSIC_VOLUMES = {\n  airship: 0.25,\n  athletic: 0.25,\n  beach: 1,\n  castle: 0.25,\n  'ice-cave': 0.25,\n  'file-select': 0.5,\n  'flower-gardens': 1,\n  'grassland': 0.15,\n  'jungle': 0.25,\n  'kapper-valley': 0.25,\n  'star-world': 0.25,\n  'underwater-underworld': 1,\n  'water': 0.25,\n  'underground': 0.5,\n}\n\nimport SLW from './SLW'\nimport Tile from './Tile'\nimport { Entity } from './Entity'\nimport { levels } from './util'\nimport { Sound } from './SoundManager'\n\nimport type { Position } from './types'\n\nimport * as entities from './Entity'\nimport * as tiles from './Tile'\n\nexport default class Level {\n  game: SLW\n\n  meta: Object // see levels.hjson\n  tileset: Image\n\n  tiles: Array <Tile>\n  entities: Array <Entity>\n\n  w: number // width\n  h: number // height\n\n  music: Sound\n  editorEnabled: boolean\n\n  static metaOf(levelid) {\n    return levels[levelid]\n  }\n\n  constructor(\n    game: SLW,\n    levelid: string,\n    tileset: Image,\n  ) {\n    this.game = game\n\n    this.tileset = tileset\n    this.entities = []\n    this.meta = levels[levelid]\n\n    // Editor mode btn:\n\n    /*\n    const editorEnabledEl_o = document.getElementById('editorEnabled')\n    const editorEnabledEl = editorEnabledEl_o.cloneNode()\n\n    this.editorEnabled = !this.meta.special.includes('world') && localStorage['editorEnabled'] === 'true'\n    // @flow ignore\n    editorEnabledEl.disabled = this.meta.special.includes('world')\n    editorEnabledEl.innerText = this.editorEnabled ? 'Editor ON' : 'Editor OFF'\n\n    editorEnabledEl.addEventListener('click', (evt: Event) => {\n      this.game.cameraInEditor = this.game.camera // set camera position\n      this.editorEnabled = !this.editorEnabled\n      localStorage['editorEnabled'] = this.editorEnabled.toString()\n      editorEnabledEl.innerText = this.editorEnabled ? 'Editor ON' : 'Editor OFF'\n    })\n\n    // @flow ignore\n    editorEnabledEl_o.parentNode.replaceChild(editorEnabledEl, editorEnabledEl_o)\n    */\n\n    const tilemap = this.meta.tiles\n    this.tiles = []\n\n    for (let k of tilemap) {\n      const id = k[0]\n      const x = k[1]\n      const y = k[2]\n      const layer = k[3]\n      const opts = k[4]\n\n      let tile = new (tiles[id])(this.game, opts)\n\n      tile.x = x\n      tile.y = y\n      tile.layer = layer\n      tile.game = game\n      tile.exists = true\n\n      this.tiles.push(tile)\n    }\n\n    this.h = this.meta.height\n    this.w = this.meta.width\n\n    this.music = this.game.sounds.getSound(`music/${this.meta.music}.mp3`)\n\n    // Normalize music.\n    this.music.volume = MUSIC_VOLUMES[this.meta.music] || 0.5\n\n    // Background music should loop.\n    this.music.loops = true\n\n    this.music.playNew()\n  }\n\n  create() {\n    // Call create() on the Level Tiles\n    for (let tile of this.tiles) {\n      tile.onCreate()\n    }\n\n    // Create all entities\n    for (let def of this.meta.entities) {\n      const constructor = entities[def.shift()]\n\n      let ent = new constructor(this.game, ...def)\n      this.entities.push(ent)\n    }\n  }\n\n  destroy() {\n    this.music.stop()\n\n    // TODO Entity destroying? Might not be a bad idea, e.g. if entities have\n    // set event listeners that reference themselves... they wouldn't be GC'd.\n    this.game.entities.splice(0, this.game.entities.length)\n  }\n\n  update() {\n    // Call update() on the tilemap's Tiles\n    for (let tile of this.tiles) {\n      tile.onUpdate()\n    }\n  }\n\n  draw() {\n    // Draw the tilemap\n    const ctx = this.game.canvas.getContext('2d')\n    if (!(ctx instanceof CanvasRenderingContext2D)) return\n\n    const viewStartX = Math.floor(this.game.camera[0] / Tile.size)\n    const viewStartY = Math.floor(this.game.camera[1] / Tile.size)\n    const viewEndX = Math.ceil(this.game.camera[0] / Tile.size) + 25\n    const viewEndY = Math.ceil(this.game.camera[1] / Tile.size) + 25\n\n    for (let y = viewStartY; y < viewEndY; y++) {\n      for (let x = viewStartX; x < viewEndX; x++) {\n        const tiles = this.tilesAt([x, y])\n        const [rendX, rendY] = this.getAbsolutePosition([x, y])\n\n        for (let tile of tiles) {\n          const [tileX, tileY] = tile.texPosition\n\n          ctx.drawImage(\n            this.tileset,\n            tileX * Tile.size, tileY * Tile.size,\n            Tile.size, Tile.size,\n\n            rendX + tile.dx, rendY + tile.dy, Tile.size, Tile.size)\n        }\n      }\n    }\n  }\n\n  // DEPRECATED\n  // Get a Tile from its Position and layer in the tilemap.\n  tileAt([tileX: number, tileY: number]: Position, layer: number = 0): Tile {\n    tileX = Math.floor(tileX)\n    tileY = Math.floor(tileY)\n    layer = Math.floor(layer)\n\n    try {\n      let r = this.tiles.filter(tile =>\n        tile.layer === layer &&\n        tile.x === tileX &&\n        tile.y === tileY)[0]\n      if(typeof r === 'undefined') throw 'nope'\n      return r\n    } catch(e) {\n      // fallback to Air tile\n      //console.warn(`Level.tileAt([${tileX}, ${tileY}]): Failed to retrieve Tile`)\n      return new (tiles.Air)(this.game)\n    }\n  }\n\n  // Get some Tiles from their Position in the tilemap.\n  tilesAt([tileX: number, tileY: number]: Position): Array <Tile> {\n    tileX = Math.floor(tileX)\n    tileY = Math.floor(tileY)\n\n    return this.tiles.filter(tile =>\n      tile.x === tileX &&\n      tile.y === tileY)\n  }\n\n  replaceTile([\n    tileX: number, tileY: number\n  ]: Position, newTile: Tile, layer: number = 0): Tile {\n    newTile.x = tileX\n    newTile.y = tileY\n    newTile.layer = layer\n    newTile.game = this.game\n    newTile.exists = true\n\n    let oldTile = this.tileAt([tileX, tileY], layer)\n    oldTile.exists = false\n    oldTile.onDestroy()\n\n    this.tiles.push(newTile)\n    newTile.onCreate()\n\n    // Send an onNearbyReplace event to all nearby tiles - see onNearbyReplace\n    for (let y = tileY - 1; y <= tileY + 1; y++) {\n      for (let x = tileX - 1; x <= tileX + 1; x++) {\n        const tile = this.tileAt([x, y], layer)\n        if (tile && tile !== newTile) {\n          tile.onNearbyReplace()\n        }\n      }\n    }\n\n    return newTile\n  }\n\n  // Gets the drawn position of a given tile position. For example, assuming\n  // that the tile size is 16, getDrawnPosition([0, 2]) would become [0, 32].\n  getAbsolutePosition([tileX, tileY]: Position): Position {\n    return [\n      Math.floor(tileX * Tile.size),\n      Math.floor(tileY * Tile.size)\n    ]\n  }\n}\n","// @flow\n\n// SUPER LIAM WORLD(tm)\n// totally not stolen from an-ok-squirrel.\n// this is a fair use of the name as specified\n// in NANALAND RULES NUMBER #99\n\nimport Tile from './Tile'\nimport Text from './Text'\nimport Level from './Level'\nimport Cursor from './Cursor'\nimport SoundManager, { Sound } from './SoundManager'\nimport { Entity, Player } from './Entity'\n\nimport {\n  arrEqual, EventController,\n  isLeft, isRight, isUp, isDown\n} from './util'\n\nimport type { Position } from './types'\n\nconst BG_COLORS = {\n  clouds: '#A0D0F8',\n  hills: '#F8E0B0',\n}\n\nconst BG_REPEATS = {\n  clouds: 'repeat-x',\n  hills: 'repeat-y',\n}\n\nexport default class SLW {\n  // Event controller.\n  events: EventController\n\n  // Sound system.\n  sounds: SoundManager\n\n  // Map to store key-pressed data in.\n  keys: Object\n\n  // Keys that were pressed this tick.\n  newKeys: Object\n\n  // Canvas used to display the game on.\n  canvas: HTMLCanvasElement\n\n  // Player object - the character that walks around the screen using the\n  // user's input as controls.\n  player: Player\n\n  // Camera position. Used for scrolling.\n  camera: Position\n  cameraInEditor: Position\n\n  // Tile that will be painted, for level editor.\n  tileToPaint: any\n\n  // Cursor object - see Cursor.js.\n  cursor: Cursor\n\n  // Stored separately from the cursor object because the cursor doesn't have\n  // any notion of \"ticks\".\n  lastPlacePos: Position\n\n  // Level, to contain information about the currently active level.\n  level: Level\n\n  // Amount of draw()s called since we started.\n  tick: number\n\n  gamepadSupport: boolean\n  gamepadEnabled: boolean\n\n  entities: Array <Entity>\n\n  // Random sounds.\n  genericTilePlaceSound: Sound\n  airPlaceSound: Sound\n\n  constructor(levelid: string, tileset: Image) {\n    this.events = new EventController()\n    this.events.registerEvent('levelchanged')\n\n    this.sounds = new SoundManager()\n\n    this.keys = {}\n    this.newKeys = {}\n\n    this.canvas = document.createElement('canvas')\n    this.canvas.width = 400\n    this.canvas.height = 400\n    this.canvas.setAttribute('tabindex', '1')\n\n    window.addEventListener('keydown', (evt: KeyboardEvent) => {\n      this.keys[evt.keyCode || evt.which] = true\n      this.newKeys[evt.keyCode || evt.which] = true\n    })\n\n    window.addEventListener('keyup', (evt: KeyboardEvent) => {\n      this.keys[evt.keyCode || evt.which] = false\n    })\n\n    this.player = new Player(this, 16, 16)\n\n    this.camera = [0, 0]\n    this.cameraInEditor = [0, 0]\n\n    this.cursor = new Cursor([0.5, 0.5])\n    this.cursor.watchMouse(this.canvas)\n\n    this.lastPlacePos = [0, 0]\n\n    this.entities = []\n\n    this.changeLevel(new Level(this, levelid, tileset))\n\n    this.gamepadSupport = (\n      'GamepadEvent' in window || 'getGamepads' in navigator\n    )\n    this.gamepadEnabled = false\n\n    this.genericTilePlaceSound = this.sounds.getSound('smw_fireball')\n    this.airPlaceSound = this.sounds.getSound('smw_thud')\n  }\n\n  // Clears the game canvas.\n  canvasClear() {\n    const ctx = this.canvas.getContext('2d')\n\n    if (ctx instanceof CanvasRenderingContext2D) {\n      ctx.fillStyle = BG_COLORS[this.level.meta.background] || 'black'\n      ctx.fillRect(0, 0, this.canvas.width, this.canvas.height)\n    }\n  }\n\n  // Do gamepad things.\n  gamepadInput() {\n    try {\n      if (this.gamepadSupport && this.gamepadEnabled) {\n        const gamepads = window.navigator.getGamepads()\n\n        if (gamepads.length > 0) {\n          let newest = gamepads[0]\n          for (let i = 0; i < gamepads.length; i++) {\n            const gamepad = gamepads[i]\n\n            if (gamepad.connected) {\n              // we want the latest timestamped gamepad\n              if (newest.timestamp < gamepad.timestamp) newest = gamepad\n            }\n          }\n\n          // set the keys\n          const pad = newest\n\n          this.keys[90] = pad.buttons[1].pressed // z\n          this.keys[80] = pad.buttons[2].pressed // x\n          this.keys[37] = pad.axes[0] < -0.5     // <\n          this.keys[39] = pad.axes[0] >  0.5     // >\n          this.keys[38] = pad.axes[1] < -0.5     // ^\n          this.keys[40] = pad.axes[1] >  0.5     // v\n        }\n      }\n    } catch(e) {\n      // There's probably gonna be errors thrown around in lots of browsers.\n      // Don't them crash the game.\n      console.warn(e)\n    }\n  }\n\n  // Modify the camera position to reflect where the player is.\n  // Essentially, this is just scrolling.\n  cameraUpdate() {\n    let minY = Tile.size + this.canvas.height / 2\n    let maxY = (this.level.h - 1) * Tile.size - this.canvas.height / 2\n    let minX = Tile.size + this.canvas.width / 2\n    let maxX = (this.level.w - 1) * Tile.size - this.canvas.width / 2\n\n    if (this.level.editorEnabled) {\n      const CAM_SPD = 4\n      if (isUp(this.keys)) this.cameraInEditor[1] -= CAM_SPD\n      if (isDown(this.keys)) this.cameraInEditor[1] += CAM_SPD\n      if (isLeft(this.keys)) this.cameraInEditor[0] -= CAM_SPD\n      if (isRight(this.keys)) this.cameraInEditor[0] += CAM_SPD\n\n      this.cameraInEditor[0] = Math.min(\n        maxX,\n        Math.max(minX, this.cameraInEditor[0])\n      )\n\n      this.cameraInEditor[1] = Math.min(\n        maxY,\n        Math.max(minY, this.cameraInEditor[1])\n      )\n    }\n\n    let x = this.level.editorEnabled ? this.cameraInEditor[0] : this.player.x\n    let y = this.level.editorEnabled ? this.cameraInEditor[1] : this.player.y\n\n    if(y < minY) y = minY\n    if (y > maxY) y = maxY\n    if (x < minX) x = minX\n    if (x > maxX) x = maxX\n\n    if (this.level.meta.special.includes('floating')) {\n      // airship-like level, wave the camera y\n      let wave = Math.sin(this.tick / 40) * Tile.size / 2\n      y += wave\n    }\n\n    let lag = this.tick > 0 ? 8 : 1\n    this.camera[0] += (x - this.canvas.width / 2 - this.camera[0]) / lag\n    this.camera[1] += (y - this.canvas.height / 2 - this.camera[1]) / lag\n  }\n\n  // Update all the entities.\n  entityUpdate() {\n    this.entities.forEach(e => e.update())\n  }\n\n  changeLevel(newLevel: Level) {\n    const oldLevel = this.level\n\n    if (oldLevel) {\n      oldLevel.destroy()\n    }\n\n    this.tick = 0\n    this.level = newLevel\n    newLevel.create()\n\n    this.events.dispatchEvent('levelchanged', {\n      oldLevel: oldLevel || null, level: newLevel\n    })\n  }\n\n  // Draw all the things.\n  draw() {\n    const ctx = this.canvas.getContext('2d')\n    if (!(ctx instanceof CanvasRenderingContext2D)) return\n\n    let tx = -0.25 * this.camera[0]\n    let ty = -0.25 * this.camera[1]\n    if (this.level.meta.special.includes('floating')) tx += -0.25 * this.tick\n\n    ctx.save()\n    ctx.translate(tx, ty)\n\n    if(this.level.meta.background === 'none') {\n      var ptrn = 'black'\n    } else {\n      let bg = new Image\n      bg.src = `background/${this.level.meta.background}.png`\n      var ptrn = ctx.createPattern(bg, BG_REPEATS[this.level.meta.background] || 'repeat')\n    }\n\n    ctx.fillStyle = ptrn\n    ctx.fillRect(-tx, -ty, this.canvas.width, this.canvas.height)\n\n    ctx.restore()\n\n    // scroll\n    ctx.save()\n    ctx.translate(Math.floor(-this.camera[0]), Math.floor(-this.camera[1]))\n\n    const entities = this.entities.sort((a, b) => {\n      if(a.z > b.z) return 1\n      if(a.z < b.z) return -1\n      return 0\n    })\n    entities.filter(e => e.z < 0).forEach(e => e.draw())\n    this.level.draw()\n    entities.filter(e => e.z >= 0).forEach(e => e.draw())\n    this.player.draw()\n\n    /*\n    ctx.fillStyle = 'red'\n    ctx.fillRect(Tile.size, (this.level.h - 1) * Tile.size, (this.level.w - 2) * Tile.size, 1)\n    ctx.fillRect(Tile.size, Tile.size, 1, (this.level.h - 2) * Tile.size)\n    ctx.fillRect((this.level.w - 1) * Tile.size, Tile.size, 1, (this.level.h - 2) * Tile.size)\n    */\n\n    // unscroll\n    ctx.restore()\n\n    // GUI:\n\n    if (this.level.meta.special.includes('world')) {\n      let on = this.player.tileOn\n      let str = this.level.meta.name\n\n      if (on.name === 'Level') {\n        let level = Level.metaOf(this.level.meta.id + '-' + on.levelid)\n\n        if (level) {\n          str += ' . ' + (on.levelid || 0)  + ' ' + level.name\n        } else {\n          str += ' . Level doesn\\'t exist rip'\n        }\n      }\n\n      ctx.drawImage(Text.write(str), 16, 16)\n    }\n\n    ctx.drawImage(Text.write(`\nCursor XY   ${this.cursor.pos.map(p => Math.floor(p)).join(' ')}\nCursor Down ${this.cursor.down.toString()}\nPlayer XY   ${this.player.x + ' ' + this.player.y}\nCamera XY   ${this.camera.map(p => Math.floor(p)).join(' ')}\n    `, 'rgba(0, 0, 0, 0.5)'), 16, 32)\n\n    if (this.level.editorEnabled) {\n      // Various cursor transforms to snap to a tile:\n\n      // Start with the actual position of the cursor.\n      let [cursorX, cursorY] = this.cursor.pos\n\n      // Snap the position to a tile size. This is rounded so that grabbing tiles\n      // on the edge of the screen works better, and it also helps the cursor's\n      // rendered position follow the cursor's actual position a bit better.\n      let roundTileX = cursorX % Tile.size\n      if (roundTileX < Tile.size / 2) cursorX -= roundTileX\n      else cursorX += Tile.size - roundTileX\n\n      let roundTileY = cursorY % Tile.size\n      if (roundTileY < Tile.size / 2) cursorY -= roundTileY\n      else cursorY += Tile.size - roundTileY\n\n      // At ths point we can go on a slight tangent to get the absolute tile\n      // position of the cursor.\n      let cursorTileX = cursorX / Tile.size\n      let cursorTileY = cursorY / Tile.size\n      cursorTileX += Math.floor(this.camera[0] / Tile.size)\n      cursorTileY += Math.floor(this.camera[1] / Tile.size)\n\n      // Move the cursor so that it aligns with the camera's position.\n      cursorX -= this.camera[0] % Tile.size\n      cursorY -= this.camera[1] % Tile.size\n\n      // Center the cursor on the tile.\n      cursorX += Tile.size / 2\n      cursorY += Tile.size / 2\n\n      // Finally draw the cursor.\n      this.cursor.drawUsingCtx(ctx, cursorX, cursorY)\n\n      // If the cursor is down, (attempt to) place a block.\n      if (this.cursor.down) {\n        const tile = new (this.tileToPaint)(this)\n        const pos = [cursorTileX, cursorTileY]\n\n        // Only if the tile where we're placing the new tile is different\n        // should we do anything.\n        if (tile.name !== this.level.tileAt(pos).name) {\n\n          // Actually place the tile!\n          this.level.replaceTile(pos, tile)\n\n          // Air makes a different sound than other tiles.\n          let sound\n          if (tile.name === 'Air') {\n            sound = this.airPlaceSound\n          } else {\n            sound = this.genericTilePlaceSound\n          }\n\n          // Play the decided sound with a random pitch shift for a pleasing\n          // effect.\n          sound.makeNew().then(sound => {\n            sound.rate = 0.9 + Math.random() * 0.2\n            sound.start()\n          })\n\n        }\n      }\n    }\n\n    this.newKeys = {}\n    this.tick++\n  }\n}\n","// @flow\n\n// Super quick sound system that uses the Web Audio API.\n//\n// Basic usage:\n//\n//   const sounds = new SoundManager()\n//   sounds.loadSound('smw_coin').playNew()\n//\n//   const bgm = sounds.loadSound('music/chilly-tropics.mp3')\n//   bgm.loops = true\n//   bgm.playNew()\n//\n//   if (this.bgm) {\n//     this.bgm.stop()\n//   }\n//   this.bgm = sounds.loadSound('music/airship.mp3')\n//   this.bgm.playNew()\n//\nexport default class SoundManager {\n  sounds: Map<string, Sound>\n\n  ctx: AudioContext\n\n  urlTemplate: Function\n\n  constructor() {\n    this.sounds = new Map()\n\n    this.ctx = new AudioContext()\n\n    this.urlTemplate = u => {\n      const ext = u.match(/\\.[^.]*$/)\n      if (ext) {\n        return `sound/${u}`\n      } else {\n        return `sound/${u}.wav`\n      }\n    }\n  }\n\n  getSound(name: string): Sound {\n    if (!this.sounds.has(name)) {\n      const sound = new Sound(this, this.urlTemplate(name))\n      this.sounds.set(name, sound)\n\n      sound.load()\n\n      return sound\n    } else {\n      // @flow ignore\n      return this.sounds.get(name)\n    }\n  }\n}\n\n// A sound container. It may have multiple sounds playing at once.\nexport class Sound {\n  manager: SoundManager\n\n  srcURL: string\n\n  dataBuffer: AudioBuffer\n  dataBufferLoaded: boolean\n\n  loadingPromise: Promise<*>\n\n  loops: boolean\n  volume: number\n\n  sources: Array<SoundSource>\n\n  constructor(manager: SoundManager, srcURL: string) {\n    this.manager = manager\n\n    this.srcURL = srcURL\n\n    this.dataBufferLoaded = false\n\n    this.loops = false\n    this.volume = 1\n\n    this.sources = []\n  }\n\n  load() {\n    // If we're already downloading this sound, no need to download again!\n    if (this.loadingPromise) return this.loadingPromise\n\n    this.loadingPromise = fetch(this.srcURL)\n      .then(response => response.arrayBuffer())\n      .then(buf => this.manager.ctx.decodeAudioData(buf))\n      .then(data => {\n        this.dataBuffer = data\n        this.dataBufferLoaded = true\n      })\n\n    return this.loadingPromise\n  }\n\n  playNew() {\n    this.makeNew().then(sound => {\n      sound.start()\n    })\n  }\n\n  makeNew(): Promise<SoundSource> {\n    if (this.dataBufferLoaded) {\n      const source = new SoundSource(this, this.dataBuffer)\n      this.sources.push(source)\n      return Promise.resolve(source)\n    } else {\n      return this.load().then(() => this.makeNew())\n    }\n  }\n\n  stop() {\n    for (let source of this.sources) {\n      source.stop()\n    }\n\n    this.sources.splice(0, this.sources.length)\n  }\n}\n\n// A single sound source. Only has one sound source, and is used for\n// manipulating that one sound source. Example usage - how to double the\n// volume of *one* sound's output:\n//\n//   const sound = sounds.getSound('click')\n//   sound.makeNew().then(sound => {\n//     sound.volume = 2\n//     sound.start()\n//   })\n//\n// Note if you'd like to set the volume on all sound sources created by\n// default, you can just do this:\n//\n//   const sound = sounds.getSound('click')\n//   sound.volume = 2\n//   sound.playNew()\n//\nexport class SoundSource {\n  manager: SoundManager\n\n  source: AudioBufferSourceNode\n  gainNode: GainNode\n\n  constructor(sound: Sound, buffer: AudioBuffer) {\n    this.manager = sound.manager\n\n    this.source = this.manager.ctx.createBufferSource()\n    this.source.buffer = buffer\n    this.source.loop = sound.loops\n\n    this.gainNode = this.manager.ctx.createGain()\n\n    this.source.connect(this.gainNode)\n    this.gainNode.connect(this.manager.ctx.destination)\n\n    this.volume = sound.volume\n  }\n\n  start() {\n    this.source.start(0)\n  }\n\n  stop() {\n    this.source.stop()\n  }\n\n  set volume(value: number) {\n    this.gainNode.gain.value = value\n  }\n\n  get volume(): number {\n    return this.gainNode.gain.value\n  }\n\n  set rate(value: number) {\n    this.source.playbackRate.value = value\n  }\n\n  get rate(): number {\n    return this.source.playbackRate.value\n  }\n}\n","import { tint } from './util'\n\nexport default Text = {\n  // Writes some text and returns a canvas with the text on it.\n  //\n  // Typically used in combination with ctx.drawImage:\n  //   ctx.drawImage(Text.write('Hello World!'), 0, 0)\n  write: function(str: string = '', color: string = 'black') {\n    let canvas = document.createElement('canvas')\n    canvas.width = Math.max(...str.split('\\n').map(chars => chars.length)) * 8\n    canvas.height = str.split('\\n').length * 8\n    \n    let ctx = canvas.getContext('2d')\n    if (!ctx) throw new TypeError('Failed to get new canvas context.')\n    \n    let img = tint(Text.set, color)\n    \n    let x = 0, y = 0\n    for (let i in str) {\n      let char = str[i]\n      \n      if (char === '\\n') {\n        x = 0\n        y += 8\n      } else {\n        let [dx, dy] = Text.map[char] || [0, 0]\n        \n        ctx.drawImage(img, dx * 8, dy * 8 + 1, 8, 8, x, y, 8, 8)\n        \n        x += 8\n      }\n    }\n    \n    return canvas\n  },\n  \n  set: new Image,\n  \n  map: {\n    'A': [0, 0],\n    'B': [1, 0],\n    'C': [2, 0],\n    'D': [3, 0],\n    'E': [4, 0],\n    'F': [5, 0],\n    'G': [6, 0],\n    'H': [7, 0],\n    'I': [8, 0],\n    'J': [9, 0],\n    'K': [10, 0],\n    'L': [11, 0],\n    'M': [12, 0],\n    'N': [13, 0],\n    'O': [14, 0],\n    'P': [15, 0],\n    'Q': [16, 0],\n    'R': [17, 0],\n    'S': [0, 1],\n    'T': [1, 1],\n    'U': [2, 1],\n    'V': [3, 1],\n    'W': [4, 1],\n    'X': [5, 1],\n    'Y': [6, 1],\n    'Z': [7, 1],\n    \n    'a': [8, 1],\n    'b': [9, 1],\n    'c': [10, 1],\n    'd': [11, 1],\n    'e': [12, 1],\n    'f': [13, 1],\n    'g': [14, 1],\n    'h': [15, 1],\n    'i': [16, 1],\n    'j': [17, 1],\n    'k': [0, 2],\n    'l': [1, 2],\n    'm': [2, 2],\n    'n': [3, 2],\n    'o': [4, 2],\n    'p': [5, 2],\n    'q': [6, 2],\n    'r': [7, 2],\n    's': [8, 2],\n    't': [9, 2],\n    'u': [10, 2],\n    'v': [11, 2],\n    'w': [12, 2],\n    'x': [13, 2],\n    'y': [14, 2],\n    'z': [15, 2],\n    \n    '?': [0, 3],\n    '!': [1, 3],\n    '.': [2, 3],\n    \"'\": [3, 3],\n    '(': [4, 3],\n    ')': [5, 3],\n    '#': [6, 3],\n    ' ': [7, 3],\n    '-': [8, 3],\n    \n    '0': [0, 4],\n    '1': [1, 4],\n    '2': [2, 4],\n    '3': [3, 4],\n    '4': [4, 4],\n    '5': [5, 4],\n    '6': [6, 4],\n    '7': [7, 4],\n    '8': [8, 4],\n    '9': [9, 4],\n  },\n}\n\nText.set.src = 'sprites/text.png'\n","// @flow\n\nimport SLW from './SLW'\nimport { rnd, Empty } from './util'\nimport { Entity } from './Entity'\nimport * as entities from './Entity'\n\nimport type { Position } from './types'\nimport type { Sound } from './SoundManager'\n\nexport default class Tile {\n  game: SLW\n\n  // Human-readable name\n  name: string\n\n  // Absolute [x, y] position in tileset.png\n  texPosition: Position\n\n  // true if objects should collide with this tile\n  solid: boolean\n\n  // If solid is false, should the top be solid anyways?\n  solidTop: boolean\n\n  x: number // static\n  y: number // static\n  layer: number // static\n  \n  dx: number\n  dy: number\n\n  exists: boolean\n\n  levelid: ?number // WorldLevelTile only\n\n  constructor(game: SLW, props: Object = {}) {\n    this.game = game\n\n    this.name = props.name || 'Unknown'\n    this.texPosition = props.texPosition\n    this.solid = props.solid || false\n    this.solidTop = props.solidTop || false\n    this.exists = false\n\n    this.dx = 0\n    this.dy = 0\n  }\n\n  static size: number\n\n  // Called when this Tile comes into existence, e.g. the level loads.\n  onCreate() {}\n\n  // Called if and when this Tile is replaced with another.\n  onDestroy() {}\n\n  // Called every frame.\n  onUpdate() {}\n\n  // Called when a nearby block is set:\n  //\n  // -----\n  // -!!!-\n  // -!X!-\n  // -!!!-\n  // -----\n  //\n  // (! is a tile that sends the event, X is a this tile, - is a tile not\n  // sent the event)\n  onNearbyReplace() {}\n\n  // Called if and when this Tile is colliding with an entity.\n  // (Won't work if { solid: true }!)\n  onTouch(by: Entity) {}\n\n  // Same deal, but for when it's being standed on.\n  onStand(by: Entity) {}\n\n  // Air punched, e.g. hitting a question mark block.\n  onAirPunch() {}\n}\n\n/* // TODO convert this\nexport const tilemap: Map <string, Class<Tile>> = new Map([\n  ['=', class GroundTile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Ground',\n        texPosition: [4, 5],\n        solid: true\n      })\n    }\n\n    onCreate() {\n      this.updateTexture()\n    }\n\n    onNearbyReplace() {\n      this.updateTexture()\n    }\n\n    updateTexture() {\n      // we need to look at our adjacient tiles to figure out\n      // how we should be displayed:\n\n      let topTile    = this.game.level.tileAt([this.x, this.y - 1])\n      let bottomTile = this.game.level.tileAt([this.x, this.y + 1])\n      let leftTile   = this.game.level.tileAt([this.x - 1, this.y])\n      let rightTile  = this.game.level.tileAt([this.x + 1, this.y])\n\n      let top    = topTile.name    === this.name\n      let bottom = bottomTile.name === this.name\n      let left   = leftTile.name   === this.name\n      let right  = rightTile.name  === this.name\n\n      let topLeftTile = this.game.level.tileAt([this.x - 1, this.y - 1])\n      let topRightTile = this.game.level.tileAt([this.x + 1, this.y - 1])\n      let bottomLeftTile = this.game.level.tileAt([this.x - 1, this.y + 1])\n      let bottomRightTile = this.game.level.tileAt([this.x + 1, this.y + 1])\n\n      let topLeft = topLeftTile.name === this.name\n      let topRight = topRightTile.name === this.name\n      let bottomLeft = bottomLeftTile.name === this.name\n      let bottomRight = bottomRightTile.name === this.name\n\n      if(top && left && right && bottom) this.texPosition = [1, 6]\n      if(!top && left && right && bottom) this.texPosition = [1, 5]\n      if(!top && !left && right && bottom) this.texPosition = [0, 5]\n      if(!top && left && !right && bottom) this.texPosition = [2, 5]\n      if(top && !left && right && bottom) this.texPosition = [0, 6]\n      if(top && !left && right && !bottom) this.texPosition = [0, 7]\n      if(top && left && right && !bottom) this.texPosition = [1, 7]\n      if(top && left && !right && !bottom) this.texPosition = [2, 7]\n      if(top && left && !right && bottom) this.texPosition = [2, 6]\n\n      if(top && left && right && bottom && !topLeft && !topRight)\n        this.texPosition = [5, 5]\n\n      if(top && left && right && bottom && !topLeft && topRight)\n        this.texPosition = [3, 6]\n\n      if(top && left && right && bottom && topLeft && !topRight)\n        this.texPosition = [4, 6]\n\n      if(top && left && right && bottom && !bottomLeft)\n        this.texPosition = [6, 6]\n\n      if(top && left && right && bottom && !bottomRight)\n        this.texPosition = [5, 6]\n\n      if(!top && left && right && bottom && !bottomRight)\n        this.texPosition = [6, 5]\n\n      if(!top && left && right && bottom && !bottomLeft)\n        this.texPosition = [7, 5]\n\n      if(top && left && right && !bottom && !topLeft && !topRight)\n        this.texPosition = [6, 7]\n\n      if(!top && !left && right && !bottom) this.texPosition = [3, 7]\n      if(left && right && !bottom && !top) this.texPosition = [4, 7]\n      if(left && !right && !bottom && !top) this.texPosition = [5, 7]\n      if(!top && !left && !right && bottom) this.texPosition = [3, 5]\n\n      if(top && !left && !right && bottom) this.texPosition = [7, 6]\n      if(top && !left && !right && !bottom) this.texPosition = [7, 7]\n\n      if(top && left && !right && bottom && !topLeft) this.texPosition = [8, 5]\n\n      // TODO\n    }\n  }],\n\n  ['P', class PipeTile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Pipe',\n        texPosition: [8, 4],\n        solid: true\n      })\n    }\n\n    onCreate() {\n      this.updateTexture()\n    }\n\n    onNearbyReplace() {\n      this.updateTexture()\n    }\n\n    updateTexture() {\n      // we need to look at our adjacient tiles to figure out\n      // how we should be displayed:\n\n      let topTile    = this.game.level.tileAt([this.x, this.y - 1])\n      let bottomTile = this.game.level.tileAt([this.x, this.y + 1])\n      let leftTile   = this.game.level.tileAt([this.x - 1, this.y])\n      let rightTile  = this.game.level.tileAt([this.x + 1, this.y])\n\n      let top    = topTile.name    === this.name\n      let bottom = bottomTile.name === this.name\n                || bottomTile.name === 'Ground'\n      let left   = leftTile.name   === this.name\n      let right  = rightTile.name  === this.name\n\n      let topLeftTile = this.game.level.tileAt([this.x - 1, this.y - 1])\n      let topRightTile = this.game.level.tileAt([this.x + 1, this.y - 1])\n      let bottomLeftTile = this.game.level.tileAt([this.x - 1, this.y + 1])\n      let bottomRightTile = this.game.level.tileAt([this.x + 1, this.y + 1])\n\n      let topLeft = topLeftTile.name === this.name\n      let topRight = topRightTile.name === this.name\n      let bottomLeft = bottomLeftTile.name === this.name\n      let bottomRight = bottomRightTile.name === this.name\n\n      if (!right) this.texPosition[0] = 9\n      if (!bottom) this.texPosition[1] = 4\n      if (!top)    this.texPosition[1] = 2\n      if (top && bottom) this.texPosition[1] = 3\n    }\n  }],\n\n  ['?', class QBlockTile extends Tile {\n    i: number\n\n    punchSound: Sound\n\n    constructor(game) {\n      super(game, {\n        name: '? Block',\n        texPosition: [0, 4],\n        solid: true\n      })\n    }\n\n    onCreate() {\n      this.i = 0\n      this.punchSound = this.game.sounds.getSound('smw_shell_ricochet')\n    }\n\n    onUpdate() {\n      this.i += 0.1\n      if(this.i >= 4) this.i = 0\n      this.texPosition[0] = Math.max(Math.floor(this.i), 0)\n    }\n\n    onAirPunch() {\n      this.punchSound.playNew()\n\n      if (this.game && this.x && this.y) {\n        const tile = new (Tile.get('x'))(this.game)\n        const usedBlock = this.game.level.replaceTile([this.x, this.y], tile)\n        usedBlock.dy = -0.5 * Tile.size\n\n        let [x, y] = this.game.level.getAbsolutePosition([this.x, this.y])\n        let shroom = new Mushroom(this.game, x, 0)\n        shroom.y = y - shroom.h - 1\n        shroom.yv = -1.5\n        this.game.entities.push(shroom)\n      }\n    }\n  }],\n\n  ['x', class UsedBlockTile extends Tile {\n    punchSound: Sound\n\n    constructor(game) {\n      super(game, {\n        name: 'Used Block',\n        texPosition: [4, 4],\n        solid: true,\n      })\n    }\n\n    onCreate() {\n      // TODO 50% volume\n      this.punchSound = this.game.sounds.getSound('smw_shell_ricochet')\n    }\n\n    onAirPunch() {\n      this.punchSound.playNew()\n    }\n\n    onUpdate() {\n      if(this.dy < 0) this.dy = Math.ceil(this.dy * 0.9)\n      else this.dy = 0\n    }\n  }],\n\n  ['*', class InvisibleBlockTile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Invisible Block',\n        texPosition: [0, 0],\n        solid: true\n      })\n    }\n  }],\n\n  ['~', class DonutTile extends Tile {\n    fallVelocity: number\n    fallCountdown: number\n    falling: boolean\n    lastStoodOn: number\n\n    constructor(game) {\n      super(game, {\n        name: 'Donut Block',\n        texPosition: [4, 3],\n        solid: false,\n        solidTop: true\n      })\n\n      this.fallVelocity = 0\n      this.fallCountdown = 40\n      this.falling = false\n      this.lastStoodOn = Date.now()\n    }\n\n    onUpdate() {\n      if (this.falling) {\n        this.dy += this.fallVelocity\n        this.dx = 0\n\n        if (this.fallVelocity < 6) {\n          this.fallVelocity += 0.3\n        }\n      }\n\n      if (this.lastStoodOn - Date.now() < -5 && !this.falling) {\n        // no longer\n        this.texPosition = [4, 3]\n        this.fallCountdown = 40\n        this.dx = 0\n        this.dy = 0\n      }\n\n      if (this.lastStoodOn - Date.now() < -2500 && this.falling) {\n        this.solidTop = true\n        this.dx = 0\n        this.dy = 0\n        this.fallCountdown = 40\n        this.texPosition = [4, 3]\n        this.fallVelocity = 0\n        this.falling = false\n      }\n    }\n\n    onStand() {\n      this.fallCountdown--\n      if (this.fallCountdown <= 0) {\n        this.falling = true\n        this.solidTop = false\n      } else {\n        this.dx = rnd(-2, 2)\n        this.dy = rnd(-2, 2)\n      }\n\n      this.lastStoodOn = Date.now()\n      this.texPosition = [4, 2]\n    }\n  }],\n\n  ['-', class AirTile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Air',\n        texPosition: [0, 0],\n      })\n    }\n\n    onCreate() {\n      let topTile    = this.game.level.tileAt([this.x, this.y - 1])\n      let bottomTile = this.game.level.tileAt([this.x, this.y + 1])\n      let leftTile   = this.game.level.tileAt([this.x - 1, this.y])\n      let rightTile  = this.game.level.tileAt([this.x + 1, this.y])\n\n      let topLeftTile = this.game.level.tileAt([this.x - 1, this.y - 1])\n      let topRightTile = this.game.level.tileAt([this.x + 1, this.y - 1])\n      let bottomLeftTile = this.game.level.tileAt([this.x - 1, this.y + 1])\n      let bottomRightTile = this.game.level.tileAt([this.x + 1, this.y + 1])\n\n      // if below us is the [centre, top] of ground, randomly place foliage\n      if(bottomTile.name === 'Ground' && bottomLeftTile.name === 'Ground' && bottomRightTile.name === 'Ground') {\n        let foliage = rnd(0, 4) // 1 in 5 chance of any at all\n\n        if(foliage === 0) {\n          let what = rnd(0, 4) // random piece\n\n          if(what === 0) {\n            if(topTile.name !== this.name) return\n\n            // tree!\n            this.texPosition = [0, 1]\n            topTile.texPosition = [1, 0]\n\n          } else {\n            this.texPosition = [what, 1]\n          }\n        }\n      }\n    }\n  }],\n\n  ['C', class CloudTile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Cloud',\n        texPosition: [4, 1],\n        solidTop: true,\n      })\n    }\n  }],\n\n  // World tiles ///////////////////////////////////////////////////////////////\n\n  ['W ~', class WorldWaterTile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Water',\n        texPosition: [0, 15],\n      })\n\n      this.solid = true\n    }\n  }],\n\n  ['W  ', class WorldGroundTile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Ground',\n        texPosition: [1, 13],\n      })\n\n      this.solid = true\n    }\n\n    onUpdate() {\n      let topTile    = this.game.level.tileAt([this.x, this.y - 1])\n      let bottomTile = this.game.level.tileAt([this.x, this.y + 1])\n      let leftTile   = this.game.level.tileAt([this.x - 1, this.y])\n      let rightTile  = this.game.level.tileAt([this.x + 1, this.y])\n\n      let top    = topTile.name    !== 'Water'\n      let bottom = bottomTile.name !== 'Water'\n      let left   = leftTile.name   !== 'Water'\n      let right  = rightTile.name  !== 'Water'\n\n      let topLeftTile = this.game.level.tileAt([this.x - 1, this.y - 1])\n      let topRightTile = this.game.level.tileAt([this.x + 1, this.y - 1])\n      let bottomLeftTile = this.game.level.tileAt([this.x - 1, this.y + 1])\n      let bottomRightTile = this.game.level.tileAt([this.x + 1, this.y + 1])\n\n      let topLeft = topLeftTile.name !== 'Water'\n      let topRight = topRightTile.name !== 'Water'\n      let bottomLeft = bottomLeftTile.name !== 'Water'\n      let bottomRight = bottomRightTile.name !== 'Water'\n\n      if(!left && top && right && bottom) this.texPosition = [0, 13]\n      if(left && top && !right && bottom) this.texPosition = [2, 13]\n      if(left && !top && right && bottom) this.texPosition = [1, 12]\n      if(left && top && right && !bottom) this.texPosition = [1, 14]\n\n      if(left && !top && !right && bottom) this.texPosition = [2, 12]\n      if(!left && !top && right && bottom) this.texPosition = [0, 12]\n      if(left && top && !right && !bottom) this.texPosition = [2, 14]\n      if(!left && top && right && !bottom) this.texPosition = [0, 14]\n\n      if(left && top && right && bottom && !topRight) {\n        this.texPosition = [3, 13]\n      }\n\n      if(left && top && right && bottom && !topLeft) {\n        this.texPosition = [4, 13]\n      }\n\n      if(left && top && right && bottom && !bottomRight) {\n        this.texPosition = [3, 12]\n      }\n\n      if(left && top && right && bottom && !bottomLeft) {\n        this.texPosition = [4, 12]\n      }\n    }\n  }],\n\n  ['W @', class WorldPlayerTile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Player',\n        texPosition: [0, 0],\n      })\n    }\n\n    onCreate() {\n      // place the player here\n      const [x, y] = this.game.level.getAbsolutePosition([this.x, this.y])\n      this.game.player.x = x\n      this.game.player.y = y// - this.game.player.h + Tile.size\n\n      // replace this tile with a pipe\n      const tile = new (Tile.get('W P'))(this.game)\n      this.game.level.replaceTile([this.x, this.y], tile)\n    }\n  }],\n\n  ['W :', class WorldFenceTile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Fence',\n        texPosition: [4, 14],\n      })\n\n      this.solid = true\n    }\n  }],\n\n  ['W .', class WorldFlowerTile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Flower',\n        texPosition: [3, 14],\n      })\n\n      this.solid = true\n    }\n  }],\n\n  ['W P', class WorldPipeTile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Pipe',\n        texPosition: [0, 11],\n      })\n    }\n  }],\n\n  ['W H', class WorldHouseTile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'House',\n        texPosition: [1, 11],\n      })\n    }\n  }],\n\n  ['W -', class WorldPathTile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Path',\n        texPosition: [1, 9],\n      })\n    }\n\n    onUpdate() {\n      let topTile    = this.game.level.tileAt([this.x, this.y - 1])\n      let bottomTile = this.game.level.tileAt([this.x, this.y + 1])\n      let leftTile   = this.game.level.tileAt([this.x - 1, this.y])\n      let rightTile  = this.game.level.tileAt([this.x + 1, this.y])\n\n      const k = [this.name, 'Level', 'Pipe']\n\n      let top    = k.includes(topTile.name)\n      let bottom = k.includes(bottomTile.name)\n      let left   = k.includes(leftTile.name)\n      let right  = k.includes(rightTile.name)\n\n      if(top && !left && !right && bottom) this.texPosition = [2, 8]\n      if(top && left && !right && !bottom) this.texPosition = [3, 9]\n      if(top && !left && right && bottom) this.texPosition = [2, 10]\n      if(!top && !left && right && bottom) this.texPosition = [3, 8]\n      if(top && !left && right && !bottom) this.texPosition = [1, 8]\n      if(!top && left && !right && bottom) this.texPosition = [1, 10]\n    }\n  }],\n\n  ['W lv', class WorldLevelTile extends Tile {\n    complete: boolean\n\n    constructor(game) {\n      super(game, {\n        name: 'Level',\n        texPosition: [2, 9],\n      })\n\n      this.complete = false\n    }\n\n    onUpdate() {\n      this.texPosition = this.complete ?  [2, 9] : [3, 10]\n    }\n  }],\n\n  ['W 1', class WorldLevel1Tile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Level 1',\n        texPosition: [0, 0],\n      })\n    }\n\n    onCreate() {\n      // replace this tile with a level tile\n      const tile = new (Tile.get('W lv'))(this.game)\n      tile.levelid = 1\n      this.game.level.replaceTile([this.x, this.y], tile)\n    }\n  }],\n\n  ['W 2', class WorldLevel2Tile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Level 2',\n        texPosition: [0, 0],\n      })\n    }\n\n    onCreate() {\n      // replace this tile with a level tile\n      const tile = new (Tile.get('W lv'))(this.game)\n      tile.levelid = 2\n      this.game.level.replaceTile([this.x, this.y], tile)\n    }\n  }],\n\n  ['W 3', class WorldLevel3Tile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Level 3',\n        texPosition: [0, 0],\n      })\n    }\n\n    onCreate() {\n      // replace this tile with a level tile\n      const tile = new (Tile.get('W lv'))(this.game)\n      tile.levelid = 3\n      this.game.level.replaceTile([this.x, this.y], tile)\n    }\n  }],\n\n  ['W 4', class WorldLevel4Tile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Level 4',\n        texPosition: [0, 0],\n      })\n    }\n\n    onCreate() {\n      // replace this tile with a level tile\n      const tile = new (Tile.get('W lv'))(this.game)\n      tile.levelid = 4\n      this.game.level.replaceTile([this.x, this.y], tile)\n    }\n  }],\n\n  ['W 5', class WorldLevel5Tile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Level 5',\n        texPosition: [0, 0],\n      })\n    }\n\n    onCreate() {\n      // replace this tile with a level tile\n      const tile = new (Tile.get('W lv'))(this.game)\n      tile.levelid = 5\n      this.game.level.replaceTile([this.x, this.y], tile)\n    }\n  }],\n\n  ['W 6', class WorldLevel6Tile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Level 6',\n        texPosition: [0, 0],\n      })\n    }\n\n    onCreate() {\n      // replace this tile with a level tile\n      const tile = new (Tile.get('W lv'))(this.game)\n      tile.levelid = 6\n      this.game.level.replaceTile([this.x, this.y], tile)\n    }\n  }],\n\n  ['W 7', class WorldLevel7Tile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Level 7',\n        texPosition: [0, 0],\n      })\n    }\n\n    onCreate() {\n      // replace this tile with a level tile\n      const tile = new (Tile.get('W lv'))(this.game)\n      tile.levelid = 7\n      this.game.level.replaceTile([this.x, this.y], tile)\n    }\n  }],\n\n  ['W 8', class WorldLevel8Tile extends Tile {\n    constructor(game) {\n      super(game, {\n        name: 'Level 8',\n        texPosition: [0, 0],\n      })\n    }\n\n    onCreate() {\n      // replace this tile with a level tile\n      const tile = new (Tile.get('W lv'))(this.game)\n      tile.levelid = 8\n      this.game.level.replaceTile([this.x, this.y], tile)\n    }\n  }],\n])\n*/\n\nTile.size = 16\n\nexport class Air extends Tile {\n  constructor(game: SLW) {\n    super(game, {\n      name: 'Air',\n      texPosition: [0, 0],\n    })\n  }\n\n  onCreate() {\n    this.updateTexture()\n  }\n\n  onNearbyReplace() {\n    this.updateTexture()\n  }\n\n  updateTexture() {\n    let topTile    = this.game.level.tileAt([this.x, this.y - 1])\n    let bottomTile = this.game.level.tileAt([this.x, this.y + 1])\n    let leftTile   = this.game.level.tileAt([this.x - 1, this.y])\n    let rightTile  = this.game.level.tileAt([this.x + 1, this.y])\n\n    let topLeftTile = this.game.level.tileAt([this.x - 1, this.y - 1])\n    let topRightTile = this.game.level.tileAt([this.x + 1, this.y - 1])\n    let bottomLeftTile = this.game.level.tileAt([this.x - 1, this.y + 1])\n    let bottomRightTile = this.game.level.tileAt([this.x + 1, this.y + 1])\n\n    // if below us is the [centre, top] of ground, randomly place foliage\n    if(bottomTile.name === 'Ground' && bottomLeftTile.name === 'Ground' && bottomRightTile.name === 'Ground') {\n      let foliage = rnd(0, 4) // 1 in 5 chance of any at all\n\n      if(foliage === 0) {\n        let what = rnd(0, 4) // random piece\n\n        if(what === 0) {\n          if(topTile.name !== this.name) return\n\n          // tree!\n          this.texPosition = [0, 1]\n          topTile.texPosition = [1, 0]\n\n        } else {\n          this.texPosition = [what, 1]\n        }\n      }\n    }\n  }\n}\n\nexport class QuestionBlock extends Tile {\n  i: number\n  punchSound: Sound\n  output: any\n\n  constructor(game: SLW, opts: Object) {\n    super(game, {\n      name: '? Block',\n      texPosition: [0, 4],\n      solid: true\n    })\n\n    this.output = opts.output\n  }\n\n  onCreate() {\n    this.i = 0\n    this.punchSound = this.game.sounds.getSound('smw_shell_ricochet')\n  }\n\n  onUpdate() {\n    this.i += 0.1\n    if(this.i >= 4) this.i = 0\n    this.texPosition[0] = Math.max(Math.floor(this.i), 0)\n  }\n\n  onAirPunch() {\n    this.punchSound.playNew()\n\n    if (this.game && this.x && this.y) {\n      const tile = new UsedBlock(this.game)\n      const usedBlock = this.game.level.replaceTile([this.x, this.y], tile)\n      usedBlock.dy = -0.5 * Tile.size\n\n      if (this.output) {\n        let [x, y] = this.game.level.getAbsolutePosition([this.x, this.y])\n        let out = new (this.output)(this.game, x, 0)\n        out.y = y - out.h - 1\n        out.yv = -1.5\n        this.game.entities.push(out)\n      }\n    }\n  }\n}\n\nexport class UsedBlock extends Tile {\n  punchSound: Sound\n\n  constructor(game: SLW) {\n    super(game, {\n      name: 'Used Block',\n      texPosition: [4, 4],\n      solid: true,\n    })\n  }\n\n  onCreate() {\n    // TODO 50% volume\n    this.punchSound = this.game.sounds.getSound('smw_shell_ricochet')\n  }\n\n  onAirPunch() {\n    this.punchSound.playNew()\n  }\n\n  onUpdate() {\n    if(this.dy < 0) this.dy = Math.ceil(this.dy * 0.9)\n    else this.dy = 0\n  }\n}\n","import SLW from './SLW'\nimport BrowserSLW from './BrowserSLW'\n\nwindow.addEventListener('load', e => {\n  let tileset = new Image\n\n  tileset.onload = () => {\n    const game = new SLW('K', tileset)\n    const browser = new BrowserSLW(game)\n\n    // For debugging only\n    window.game = game\n    window.browser = browser\n\n    document.body.appendChild(game.canvas)\n\n    game.tileset = tileset\n    game.canvas.focus()\n\n    let didTick = false\n\n    !(function render() {\n      game.gamepadInput()\n\n      if(document.hasFocus()) { // don't update if we're in devtools\n        // Very deliberate order:\n        game.player.update()\n        game.cameraUpdate()\n        game.level.update()\n        game.entityUpdate()\n\n        game.canvasClear()\n        game.draw()\n      }\n\n      requestAnimationFrame(render)\n    })()\n  }\n\n  tileset.src = 'tileset.png'\n})\n","module.exports = \"{\\n  K: {\\n    id: K\\n    name: Kapper Kanyon\\n\\n    music: kapper-kanyon\\n    background: clouds\\n\\n    special: [\\n      world\\n    ]\\n\\n    entities: [\\n      [\\n        HalfwayFlag\\n        2, 2, 1\\n      ]\\n    ]\\n\\n    tiles: [\\n      [\\n        QuestionBlock\\n        1, 2, 0\\n\\n        {\\n          output: Coin\\n        }\\n      ]\\n    ]\\n\\n    width:  100\\n    height: 100\\n  }\\n}\\n\";\n","// @flow\n// General utility functions.\n\n// Gets the sign of a number, as a number. If the given number is negative,\n// it returns -1, if positive, 1, and if zero, 0.\nexport function sign(n: number): number {\n  if (n > 0) return 1\n  if (n < 0) return -1\n  return 0\n}\n\n// Returns a random integer from `min` through `max`.\nexport function rnd(min: number, max: number): number {\n  return Math.floor(Math.random() * max) + min\n}\n\n// Compares the contents of two arrays.\nexport function arrEqual(arr1: Array<any>, arr2: Array<any>): boolean {\n  if (arr1.length !== arr2.length) {\n    return false\n  }\n\n  for (let i = 0; i < arr1.length; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false\n    }\n  }\n\n  return true\n}\n\n// Returns an image written over by a colour, taking an operation type and alpha.\n// Default values useful for masking.\nexport function tint(img: Image, colour: string, operation: string = 'source-in', alpha: number = 1): Image {\n  // create hidden canvas (using image dimensions)\n  let canvas = document.createElement('canvas')\n  canvas.width = img.width\n  canvas.height = img.height\n\n  let ctx = canvas.getContext('2d')\n  if (!ctx) throw new TypeError('Failed to get new canvas context.')\n  ctx.drawImage(img, 0, 0)\n\n  // overlay filled rectangle using lighter composition\n  ctx.globalCompositeOperation = operation\n  ctx.globalAlpha = alpha\n  ctx.fillStyle = colour\n  ctx.fillRect(0, 0, canvas.width, canvas.height)\n\n  // return a new image\n  let res = new Image\n  res.src = canvas.toDataURL()\n  return res\n}\n\n// Returns an image, taking a width, height, and optional offset values.\nexport function crop(img: Image, w: number, h: number, ox: number = 0, oy: number = 0): Image {\n  // create hidden canvas (using image dimensions)\n  let canvas = document.createElement('canvas')\n  canvas.width = w\n  canvas.height = h\n\n  let ctx = canvas.getContext('2d')\n  if (!ctx) throw new TypeError('Failed to get new canvas context.')\n\n  // perfrom actual 'crop' operation\n  ctx.drawImage(img, ox, oy, w, h, 0, 0, w, h)\n\n  // return a new image\n  let res = new Image\n  res.src = canvas.toDataURL()\n  return res\n}\n\n// Event controller class.\n//\n// You should NOT use this:\n// * When a subclass would be beter off instead. For example, don't use\n//   an event controller in place of a tile subclass, even though they have\n//   similar feels (\"onCreate\", \"onDelete\", etc). If you're going to have\n//   one specific behavior for an event (e.g. donut tile falling when stepped\n//   on for long enough), use a subclass, not an event controller.\n//\n// You SHOULD use this:\n// * As an interface between completely separate things. Use an event\n//   controller when you expect an event to be watched - for instance, a\n//   level changing, or a player dying.\n//\n// If you're going to use an event controller, store it on the object it's\n// relevant to with the events property. Then you can access it, for example,\n// with game.events.\n//\n// Stick to normal DOM-like event names, e.g. created, beforeunload. I know\n// it doesn't look very good but that's what's been used for event names for\n// as long as I know (in node.js too, I think!) so that's what's going to be\n// used here as well.\n//\n// Get tenses in names right. If the event is triggered after something\n// happens, the event name should be past tense - i.e. 'created'. If the event\n// is triggered before something happens, the event name should start with\n// 'before' - i.e. 'beforelevelchange'.\n//\n// In the future there's a fair chance I'll make this work with promises, so\n// that transitions might be able to be done a bit better... for example, if\n// things are supposed to happen before a level is entered, such as a\n// transition-out effect, they can be finished *before* the real internal\n// changes happen (that is, a new level is loaded).\n//\nexport class EventController {\n  listeners: Map<string, Array<Function>>\n\n  constructor() {\n    this.listeners = new Map()\n  }\n\n  // Register an event. Adding event listeners and dispatching events will\n  // throw an error if you try to do so without a registered event name -\n  // this is mostly to prevent entering the wrong event name!\n  registerEvent(eventName: string) {\n    this.listeners.set(eventName, [])\n  }\n\n  // Add an event listener. When the given event name is dispatched, the\n  // callback function will be called. The callback function may be called\n  // multiple times - always once every time the event is dispatched.\n  addEventListener(eventName: string, callback: Function) {\n    if (this.listeners.has(eventName)) {\n      const eventListeners: ?Array<Function> = this.listeners.get(eventName)\n      if (eventListeners) {\n        eventListeners.push(callback)\n      }\n    } else {\n      throw new Error('Invalid event name')\n    }\n  }\n\n  // Dispatch an event. That means calling every listener with that name. A\n  // data object argument can be passed to give data to the functions.\n  dispatchEvent(eventName: string, data: Object = {}) {\n    if (this.listeners.has(eventName)) {\n      const eventListeners: ?Array<Function> = this.listeners.get(eventName)\n      if (eventListeners) {\n        for (let callback of eventListeners) {\n          callback(data)\n        }\n      }\n    } else {\n      throw new Error('Invalid event name')\n    }\n  }\n}\n\n// is [z], [space], or any up-key down?\nexport function isJump(keys: Object): boolean {\n  return keys[90] || keys[32] || isUp(keys)\n}\n\n// is [z], [space], or [enter] down?\nexport function isYes(keys: Object): boolean {\n  return keys[32] || keys[13] || keys[90]\n}\n\n// is [a] or [left arrow] down?\nexport function isLeft(keys: Object): boolean {\n  return keys[65] || keys[37]\n}\n\n// is [d] or [right arrow] down?\nexport function isRight(keys: Object): boolean {\n  return keys[68] || keys[39]\n}\n\n// is [w] or [up arrow] down?\nexport function isUp(keys: Object): boolean {\n  return keys[87] || keys[38]\n}\n\n// is [s] or [down arrow] down?\nexport function isDown(keys: Object): boolean {\n  return keys[83] || keys[40]\n}\n\nconst hjson = require('hjson')\nexport const levels = hjson.parse(require('./levels.hjson'))\n\n// Empty class used as null.\nexport class Empty {\n  constructor() {}\n}\n"]}